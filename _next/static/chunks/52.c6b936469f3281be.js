"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[52],{54052:function(e,r,n){n.r(r),n.d(r,{Towaland:function(){return y}});var t=n(34051),i=n.n(t),a=n(85893),o=n(204),u=n(67294),l=n(53451),c=n(35277),s=n(29838),d=(n(80356),n(89783)),h=n(96272),f=n(88911),m=n(18691),p=n(39166),v=n(53451);function w(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function g(e,r,n,t,i,a,o){try{var u=e[a](o),l=u.value}catch(c){return void n(c)}u.done?r(l):Promise.resolve(l).then(t,i)}function x(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(t=n.next()).done)&&(a.push(t.value),!r||a.length!==r);o=!0);}catch(l){u=!0,i=l}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return w(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var y=function(){var e=(0,u.useRef)(),r=(0,u.useRef)(null),n=x((0,c.tH)(r),2),t=n[0],w=n[1],y=(0,u.useState)(0),M=y[0],b=y[1],S=(0,u.useState)("hello"),j=S[0],A=S[1],_=(0,u.useRef)(),C=(0,u.useRef)();return(0,u.useEffect)((function(){e.current=new l.Application({transparent:!0,width:t,height:w,autoStart:!0});var n=e.current;s.Live2DModel.registerTicker(l.Ticker),r.current.appendChild(n.view);var a=function(){var e,r=(e=i().mark((function e(){var r,t,a,o,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return n.loader.add("towa",(0,p.Z)("spine/spine_chara_0330001.json")).add("muni",(0,p.Z)("spine/spine_chara_0130001.json")).load((function(r,n){e(n)}))}));case 2:if(r=e.sent,0!==M){e.next=7;break}t=new v.spine.Spine(r.towa.spineData),a=new v.spine.Spine(r.muni.spineData),t.skeleton.setSkinByName("normal"),a.skeleton.setSkinByName("reverse"),console.log(a.skeleton.slots.map((function(e){return e}))),a.skeleton.findSlot("Rabbit ears_L(for)").setAttachment(null),a.skeleton.findSlot("Rabbit ears_R(for)").setAttachment(null),o=2*t.width>n.renderer.width?n.renderer.width/3/t.width:t.height>n.renderer.height?n.renderer.height/t.height:1,t.scale.x=o,t.scale.y=o,a.scale.x=-1*o,a.scale.y=o,t.x=.2*n.renderer.width,t.y=n.renderer.height,a.x=.8*n.renderer.width,a.y=n.renderer.height,t.state.setAnimation(0,"06_talk_A",!0),a.state.setAnimation(0,"07_talk_B",!0),n.stage.addChild(t),n.stage.addChild(a),e.next=30;break;case 7:return e.next=9,s.Live2DModel.from((0,p.Z)("live2d/towa/resources.model3.json"));case 9:return _.current=e.sent,e.next=12,s.Live2DModel.from((0,p.Z)("live2d/muni/resources.model3.json"));case 12:C.current=e.sent,u=_.current.height/2>n.renderer.height?3*n.renderer.height/_.current.height:_.current.width>3*n.renderer.width/4?n.renderer.width/_.current.width:1,_.current.x=.25*n.renderer.width,_.current.y=9*n.renderer.height/10,_.current.rotation=Math.PI,_.current.skew.x=Math.PI,_.current.scale.set(-1*u,u),_.current.anchor.set(.5,.5),C.current.x=.75*n.renderer.width,C.current.y=9*n.renderer.height/10,C.current.rotation=Math.PI,C.current.skew.x=Math.PI,C.current.scale.set(u,u),C.current.anchor.set(.5,.5),_.current.internalModel.motionManager.startRandomMotion(""),C.current.internalModel.motionManager.startRandomMotion(""),n.stage.addChild(_.current),n.stage.addChild(C.current);case 30:case"end":return e.stop()}}),e)})),function(){var r=this,n=arguments;return new Promise((function(t,i){var a=e.apply(r,n);function o(e){g(a,t,i,o,u,"next",e)}function u(e){g(a,t,i,o,u,"throw",e)}o(void 0)}))});return function(){return r.apply(this,arguments)}}();return a(),function(){var e;null===(e=r.current)||void 0===e||e.removeChild(n.view)}}),[t,w,M]),(0,u.useEffect)((function(){var e,r;_.current&&C.current&&(null===(e=_.current)||void 0===e||e.motion("",k(_.current,j)),null===(r=C.current)||void 0===r||r.motion("",k(C.current,j)));return function(){var e,r;null===(e=_.current)||void 0===e||e.internalModel.motionManager.stopAllMotions(),null===(r=C.current)||void 0===r||r.internalModel.motionManager.stopAllMotions()}}),[j]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(o.k,{flexDir:["column",null,"row"],alignItems:"center",children:[(0,a.jsxs)(d.h,{isAttached:!0,variant:"solid",children:[(0,a.jsx)(h.z,{colorScheme:0===M?"blue":"whitealpha",variant:0===M?"solid":"outline",onClick:function(){return b(0)},children:"Spine"}),(0,a.jsx)(h.z,{colorScheme:1===M?"blue":"whitealpha",variant:1===M?"solid":"outline",onClick:function(){return b(1)},children:"Live2D"})]}),1===M&&(0,a.jsxs)(o.k,{alignItems:"center",px:2,children:[(0,a.jsx)(f.x,{whiteSpace:"nowrap",children:"Pose"}),(0,a.jsx)(m.P,{onChange:function(e){return A(e.currentTarget.value)},value:j,children:["idle","happy","sad","angry","dance","yes","no","cry","amazed","shame","think","question","performance","waver","panic"].map((function(e){return(0,a.jsx)("option",{value:e,children:e},e)}))}),(0,a.jsx)(f.x,{whiteSpace:"nowrap",children:"(Doesn't make sense though)"})]})]}),(0,a.jsx)(o.k,{minH:"990px",w:"full",flex:"1",ref:r})]})};r.default=y;var k=function(e,r){var n;return null!==(n=e.internalModel.settings.motions[""].map((function(e,n){return e.File.match(r)?n:void 0})).filter((function(e){return e}))[0])&&void 0!==n?n:0}}}]);