(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[926],{83926:function(e,n,r){"use strict";r.r(n),r.d(n,{Towaland:function(){return x}});var t=r(85893),i=r(809),a=r.n(i),o=r(92447),s=r(64121),l=r(94096),u=r(67294),c=r(13450),d=r(35277),h=r(29838),f=(r(80356),r(67101)),m=r(32800),p=r(64115),v=r(40980),w=r(13450),x=function(){var e=(0,u.useRef)(),n=(0,u.useRef)(null),r=(0,d.tH)(n),i=(0,s.Z)(r,2),x=i[0],g=i[1],M=(0,u.useState)(0),S=M[0],j=M[1],_=(0,u.useState)("hello"),y=_[0],C=_[1],b=(0,u.useRef)(),A=(0,u.useRef)();return(0,u.useEffect)((function(){e.current=new c.Application({transparent:!0,width:x,height:g,autoStart:!0});var r=e.current;return h.Live2DModel.registerTicker(c.Ticker),n.current.appendChild(r.view),function(){var e=(0,o.Z)(a().mark((function e(){var n,t,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return r.loader.add("towa","spine/spine_chara_0330001.json").add("muni","spine/spine_chara_0130001.json").load((function(n,r){e(r)}))}));case 2:if(n=e.sent,0!==S){e.next=26;break}t=new w.spine.Spine(n.towa.spineData),i=new w.spine.Spine(n.muni.spineData),t.skeleton.setSkinByName("normal"),i.skeleton.setSkinByName("reverse"),i.skeleton.findSlot("nose").setAttachment(null),i.skeleton.findSlot("Rabbit ears_L(for)").setAttachment(null),i.skeleton.findSlot("Rabbit ears_R(for)").setAttachment(null),o=2*t.width>r.renderer.width?r.renderer.width/2/t.width:t.height>r.renderer.height?r.renderer.height/t.height:1,t.scale.x=o,t.scale.y=o,i.scale.x=-1*o,i.scale.y=o,t.x=.2*r.renderer.width,t.y=r.renderer.height,i.x=.8*r.renderer.width,i.y=r.renderer.height,t.state.setAnimation(0,"06_talk_A",!0),i.state.setAnimation(0,"07_talk_B",!0),r.stage.addChild(t),r.stage.addChild(i),e.next=48;break;case 26:return e.next=28,h.Live2DModel.from("live2d/towa/resources.model3.json");case 28:return b.current=e.sent,e.next=31,h.Live2DModel.from("live2d/muni/resources.model3.json");case 31:A.current=e.sent,b.current.x=.25*r.renderer.width,b.current.y=9*r.renderer.height/10,b.current.rotation=Math.PI,b.current.skew.x=Math.PI,b.current.scale.set(.5,.5),b.current.anchor.set(.5,.5),A.current.x=.75*r.renderer.width,A.current.y=9*r.renderer.height/10,A.current.rotation=Math.PI,A.current.skew.x=Math.PI,A.current.scale.set(.5,.5),A.current.anchor.set(.5,.5),b.current.internalModel.motionManager.startRandomMotion(""),A.current.internalModel.motionManager.startRandomMotion(""),r.stage.addChild(b.current),r.stage.addChild(A.current);case 48:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),function(){var e;null===(e=n.current)||void 0===e||e.removeChild(r.view)}}),[x,g,S]),(0,u.useEffect)((function(){var e,n;b.current&&A.current&&(null===(e=b.current)||void 0===e||e.motion("",k(b.current,y)),null===(n=A.current)||void 0===n||n.motion("",k(A.current,y)));return function(){var e,n;null===(e=b.current)||void 0===e||e.internalModel.motionManager.stopAllMotions(),null===(n=A.current)||void 0===n||n.internalModel.motionManager.stopAllMotions()}}),[y]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(l.k,{flexDir:["column",null,"row"],alignItems:"center",children:[(0,t.jsxs)(f.h,{isAttached:!0,variant:"solid",children:[(0,t.jsx)(m.z,{colorScheme:0===S?"blue":"whitealpha",variant:0===S?"solid":"outline",onClick:function(){return j(0)},children:"Spine"}),(0,t.jsx)(m.z,{colorScheme:1===S?"blue":"whitealpha",variant:1===S?"solid":"outline",onClick:function(){return j(1)},children:"Live2D"})]}),1===S&&(0,t.jsxs)(l.k,{alignItems:"center",px:2,children:[(0,t.jsx)(p.x,{whiteSpace:"nowrap",children:"Pose"}),(0,t.jsx)(v.Select,{onChange:function(e){return C(e.currentTarget.value)},value:y,children:["idle","happy","sad","angry","dance","yes","no","cry","amazed","shame","think","question","performance","waver","panic"].map((function(e){return(0,t.jsx)("option",{value:e,children:e},e)}))}),(0,t.jsx)(p.x,{whiteSpace:"nowrap",children:"(Doesn't make sense though)"})]})]}),(0,t.jsx)(l.k,{w:"full",flex:"1",ref:n})]})};n.default=x;var k=function(e,n){var r;return null!==(r=e.internalModel.settings.motions[""].map((function(e,r){return e.File.match(n)?r:void 0})).filter((function(e){return e}))[0])&&void 0!==r?r:0}}}]);