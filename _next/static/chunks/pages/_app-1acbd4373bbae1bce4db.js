(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[888,179],{9396:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return j}});var r=n(5893),c=n(6265),u=n(9008),o=(n(7294),n(4096)),a=n(9444),i=n(4115),s=n(8017),f=n(4536),p=n(5837),l=n(3451),d=n(2965),v=function(e){var t=e.providers,n=e.children;return t.reverse().map((function(e){return e})).reduce((function(e,t){return(0,r.jsx)(t,{children:e})}),n)},h=n(4033);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x="/muni-web";var j=function(e){var t=e.Component,n=e.pageProps,c=n.isEventPage,m=n.title,j=(0,r.jsxs)(o.k,{flexDirection:"column",w:"full",minH:"100vh",alignItems:"stretch",children:[(0,r.jsxs)(o.k,{as:"main",flexDirection:"column",alignItems:"stretch",justifyContent:"stretch",flex:1,mb:20,children:[(0,r.jsx)(o.k,{justifyContent:"center",w:"full",bg:"gray.100",children:(0,r.jsxs)(o.k,{justifyContent:"space-between",alignItems:"center",w:["100%",null,"90%"],py:4,bg:"gray.100",children:[(0,r.jsx)(a.r,{href:"".concat(x,"/"),as:"a",_hover:{textDecor:"none"},children:(0,r.jsxs)(i.x,{fontSize:"2xl",fontWeight:"bold",children:[(0,r.jsx)(i.x,{as:"span",textDecor:"line-through",color:"red.400",children:"Muni"})," ","Towa Web (Please give me a proper name)"]})}),(0,r.jsx)(a.r,{href:"".concat(x,"/event"),_hover:{textDecor:"none"},as:"a",children:(0,r.jsx)(i.x,{fontSize:"lg",children:"View all events"})})]})}),(0,r.jsx)(s.xu,{maxW:["100%",null,"90%"],w:"full",mx:"auto",children:(0,r.jsx)(t,b({},n))})]}),(0,r.jsxs)(o.k,{as:"footer",py:"20px",justifyContent:"center",bg:"gray.100",children:["Powered by"," ",(0,r.jsx)(a.r,{href:"https://www.youtube.com/watch?v=M2wZs7eHHVo",children:(0,r.jsx)(i.x,{as:"span",color:"blue.500",cursor:"pointer",ml:"2",children:"\u3080\u306b"})})]})]});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(u.default,{children:[(0,r.jsx)("title",{children:m||"Create \u3080\u306b App"}),(0,r.jsx)("link",{rel:"icon",href:"".concat(x,"/favicon.ico")}),(0,r.jsx)("meta",{property:"og:title",content:m||"Create \u3080\u306b App"}),!c&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("meta",{property:"og:url",content:"https://hamzaabamboo.github.io/muni-web"}),(0,r.jsx)("meta",{property:"og:image",content:"".concat(x,"/images/munihappy.png")}),(0,r.jsx)("meta",{property:"og:description",content:"Munimunimunimunimuni"})]})]}),(0,r.jsx)(f.x,{children:c?(0,r.jsx)(r.Fragment,{children:j}):(0,r.jsx)(v,{providers:[p.d,l.K,d.U,h.t],children:j})})]})}},7456:function(e,t,n){"use strict";n.d(t,{_n:function(){return o},bZ:function(){return a},x6:function(){return i}});var r=n(6265);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var o=function(e){return e.match("projectdivar")?"https://hambot.ham-san.net/d4dj/sig?url="+encodeURIComponent(e):e.match("d4-dj")?"https://hambot.ham-san.net/d4dj/d4db?url="+encodeURIComponent(e):e},a=function(e){return u(u({},e),{},{eventid:e.eventid+2})},i=function(e){if("string"===typeof e.type)return e.type;switch(e.type){case 0:return"Poker";case 1:return"Bingo";case 2:return"Medley";case 3:return"Raid";default:return e.type}}},5837:function(e,t,n){"use strict";n.d(t,{A:function(){return d},d:function(){return v}});var r=n(5893),c=n(809),u=n.n(c),o=n(2447),a=n(9669),i=n.n(a),s=n(7456),f=function(){var e=(0,o.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i().get((0,s._n)("http://www.projectdivar.com/ev"));case 2:return t=e.sent,e.abrupt("return",(0,s.bZ)(t.data));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=n(4693),l=n(7294),d=(0,l.createContext)({}),v=function(e){var t=e.event,n=e.children,c=(0,l.useState)(t),u=c[0],o=c[1];return t||(0,p.b)(f,o),(0,r.jsx)(d.Provider,{value:{event:u||t},children:n})}},2965:function(e,t,n){"use strict";n.d(t,{V:function(){return b},U:function(){return x}});var r=n(5893),c=n(9999),u=n(809),o=n.n(u),a=n(2447),i=n(9669),s=n.n(i),f=n(7456),p=function(){var e=(0,a.Z)(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s().get((0,f._n)("http://www.projectdivar.com/eventdata/t20?all=true&event=".concat(t-2)));case 2:return n=e.sent,e.abrupt("return",n.data.sort((function(e,t){return e.id-t.id})).map(f.bZ));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=n(4693),d=n(9490),v=n(7294),h=n(5837),m=n(3451),b=(0,v.createContext)({}),x=function(e){var t=e.children,n=(0,v.useContext)(m.G).lbData,u=(0,v.useContext)(h.A).event,o=(0,v.useState)(),a=o[0],i=o[1],s=(0,v.useRef)({}),f=(0,v.useCallback)((function(){return u?p(u.eventid):Promise.resolve(void 0)}),[u]);return(0,l.b)(f,i),(0,v.useEffect)((function(){if(n&&a){var e=n.filter((function(e){return!(s.current[e.rank]&&d.ou.fromISO(e.date).diff(s.current[e.rank]).as("seconds")<=0)&&(s.current[e.rank]=d.ou.fromISO(e.date),!0)}));e.length>0&&i((function(t){return[].concat((0,c.Z)(t),(0,c.Z)(e))}))}}),[n]),(0,r.jsx)(b.Provider,{value:{points:a},children:t})}},4033:function(e,t,n){"use strict";n.d(t,{X:function(){return f},t:function(){return p}});var r=n(5893),c=n(9999),u=n(9490),o=n(7294),a=n(5837),i=n(2965),s=n(3451),f=(0,o.createContext)({}),p=function(e){var t=e.children,n=(0,o.useContext)(s.G).lbData,p=(0,o.useContext)(i.V).points,l=(0,o.useContext)(a.A).event,d=(0,o.useState)({}),v=d[0],h=d[1],m=(0,o.useState)(),b=m[0],x=m[1],j=(0,o.useRef)();return(0,o.useEffect)((function(){!b&&p&&x(p.map((function(e){return{event:l.eventid,rank:e.rank,change:-1*Number(e.difference),date:e.date,points:e.points,name:e.name}})))}),[p]),(0,o.useEffect)((function(){if(l&&b){if(j.current){var e=[],t=n.map((function(t){var n,r=j.current.find((function(e){return e.rank===t.rank}));if(!r)return[t.rank,t.points];var c=t.points-r.points,o=c>0?c:u.ou.fromISO(t.date).diffNow().as("minutes")>-4&&null!==(n=v[t.rank])&&void 0!==n?n:0;return c>0&&e.push({event:l.eventid,rank:t.rank,change:o,date:t.date,points:t.points,name:t.name}),[t.rank,o]}));x((function(t){return[].concat((0,c.Z)(t),e)})),h(Object.fromEntries(t))}j.current=n}}),[n,l]),(0,r.jsx)(f.Provider,{value:{changes:v,pastUpdates:b},children:t})}},3451:function(e,t,n){"use strict";n.d(t,{G:function(){return v},K:function(){return h}});var r=n(5893),c=n(809),u=n.n(c),o=n(2447),a=n(9999),i=n(9669),s=n.n(i),f=n(7456),p=function(){var e=(0,o.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([s().get((0,f._n)("http://www.projectdivar.com/eventdata/t20")),s().get((0,f._n)("http://www.projectdivar.com/eventdata/t50"))]);case 2:return t=e.sent,e.abrupt("return",t.map((function(e){return e.data})).reduce((function(e,t){return[].concat((0,a.Z)(e),(0,a.Z)(t))})).sort((function(e,t){return e.rank-t.rank})).map(f.bZ));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=n(7294),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;return new Promise((function(t){return setTimeout(t,e)}))},v=(0,l.createContext)({}),h=function(e){var t=e.lbData,n=e.children,c=(0,l.useState)(),a=c[0],i=c[1],s=(0,l.useState)(),f=s[0],h=s[1],m=(0,l.useState)(2e4)[0];return(0,l.useEffect)((function(){if(!t){var e=!1;(function(){var t=(0,o.Z)(u().mark((function t(){var n;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=15;break}return t.prev=1,t.next=4,p();case 4:if(n=t.sent,!e){t.next=7;break}return t.abrupt("break",15);case 7:i(n),h(new Date);case 9:return t.prev=9,t.next=12,d(m);case 12:return t.finish(9);case 13:t.next=0;break;case 15:case"end":return t.stop()}}),t,null,[[1,,9,13]])})));return function(){return t.apply(this,arguments)}})()()}}),[m]),(0,r.jsx)(v.Provider,{value:{lbData:t||a,lastUpdated:f},children:n})}},4693:function(e,t,n){"use strict";n.d(t,{b:function(){return a}});var r=n(809),c=n.n(r),u=n(2447),o=n(7294),a=function(e,t){(0,o.useEffect)((function(){var n=!1;return function(){var r=(0,u.Z)(c().mark((function r(){var u;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,"function"===typeof e?e():e;case 2:if(u=r.sent,!n){r.next=5;break}return r.abrupt("return");case 5:t(u);case 6:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}()(),function(){n=!0}}),[e,t])}},6363:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return n(9396)}])},4453:function(){}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[774,809,351,263,433,321,629],(function(){return t(6363),t(2441)}));var n=e.O();_N_E=n}]);