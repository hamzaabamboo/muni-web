(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[645],{9439:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/graph",function(){return n(8764)}])},8764:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return y}});var t=n(5893),o=n(7294),i=n(5115),u=n(5117),a=n(5487),l=n(9490),s=n(9695),c=n.n(s),f=n(2787),d=n(4210),h=n(5277),v=n(6701),p=n(7477),x=n(3660),b=n(8889),m=n(8987);function g(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=[],t=!0,o=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(t=(u=a.next()).done)&&(n.push(u.value),!r||n.length!==r);t=!0);}catch(l){o=!0,i=l}finally{try{t||null==a.return||a.return()}finally{if(o)throw i}}return n}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function y(){var e=(0,o.useContext)(a.G).lastUpdated,r=(0,o.useRef)(null),n=g((0,h.tH)(r),2),s=n[0],y=n[1],w=g((0,x._)("graphFlags",{showTooltip:!1,advancedZoom:!1,showForecast:!1}),2),j=w[0],C=w[1],k=(0,o.useMemo)((function(){var r=l.ou.fromJSDate(e).diffNow().as("milliseconds");return 0===r?"Just now":c()(r,{round:!0,largest:2})+" ago"}),[e]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.M,{}),(0,t.jsx)(d.W,{}),(0,t.jsxs)(i.xv,{textAlign:"center",children:["Last Updated: ",k]}),(0,t.jsx)(b.Y,{graphFlags:j,setGraphFlags:C,forecastOptions:!0}),(0,t.jsx)(p.Q,{children:(0,t.jsxs)(m.z,{children:[(0,t.jsx)(i.xu,{ref:r,w:"full",h:"600px",children:(0,t.jsx)(v.q,{showForecast:j.showForecast,graphFlags:j,width:s,height:y})}),(0,t.jsx)(f.I,{})]})})]})}},8889:function(e,r,n){"use strict";n.d(r,{Y:function(){return a}});var t=n(5893),o=n(5115),i=n(9033);n(7294);function u(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}var a=function(e){var r=e.graphFlags,n=e.setGraphFlags,a=e.forecastOptions,l=void 0!==a&&a,s=function(e){n((function(r){return function(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},t=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),t.forEach((function(r){u(e,r,n[r])}))}return e}({},r,u({},e,!r[e]))}))};return(0,t.jsx)(o.kC,{flexDir:"column",children:(0,t.jsxs)(o.kC,{flexDir:"column",children:[(0,t.jsxs)(o.kC,{children:[(0,t.jsx)(i.r,{isChecked:r.showTooltip,onChange:function(){return s("showTooltip")}}),(0,t.jsx)(o.xv,{ml:2,children:"Show Details on hover"})]}),(0,t.jsxs)(o.kC,{children:[(0,t.jsx)(i.r,{isChecked:r.advancedZoom,onChange:function(){return s("advancedZoom")}}),(0,t.jsx)(o.xv,{ml:2,children:"Advanced Zoom"})]}),l&&(0,t.jsxs)(o.kC,{children:[(0,t.jsx)(i.r,{isChecked:r.showForecast,onChange:function(){return s("showForecast")}}),(0,t.jsx)(o.xv,{ml:2,children:"Show Forecast (Muni may break, as usual)"})]})]})})}},4210:function(e,r,n){"use strict";n.d(r,{W:function(){return c}});var t=n(5893),o=n(5115),i=n(5193),u=n(1664),a=n(1163),l=(n(7294),[{label:"Leaderboard",url:"/en/"},{label:"Graph",url:"/en/graph"}]),s=[{label:"Muniboard",url:"/"},{label:"Player",url:"/player"},{label:"Graph",url:"/graph"},{label:"Analyze",url:"/analyze"},{label:"Live",url:"/live"},{label:"Other Leaderboards",url:"/leaderboards"}],c=function(e){var r=e.en,n=(0,a.useRouter)();return(0,t.jsx)(o.kC,{py:2,mb:2,justifyContent:["center","start"],flexWrap:"wrap",children:(r?l:s).map((function(e){return(0,t.jsx)(i.zx,{mx:2,p:2,rounded:"md",colorScheme:"blue",variant:n.pathname===e.url?"solid":"outline",fontSize:"lg",children:(0,t.jsx)(u.default,{href:e.url,children:e.label})},e.url)}))})}},6701:function(e,r,n){"use strict";n.d(r,{q:function(){return s}});var t=n(5893),o=n(7294),i=n(8987),u=n(4517),a=n(7477),l=n(6453),s=function(e){var r=e.width,n=e.height,s=e.isSmall,c=void 0!==s&&s,f=e.isLive,d=void 0!==f&&f,h=e.graphFlags,v=e.showForecast,p=void 0!==v&&v,x=(0,o.useContext)(a.B),b=x.points,m=x.displayTier,g=(0,o.useContext)(u.A).event,y=(0,o.useContext)(i.O).forecast;return(0,t.jsx)(l.k,{id:"score",points:b,startDate:null===g||void 0===g?void 0:g.startdate,endDate:null===g||void 0===g?void 0:g.enddate,width:r,height:n,isSmall:c,isLive:d,forecast:p&&(null===m||void 0===m?void 0:m.filter((function(e){return null===y||void 0===y?void 0:y[e]})).map((function(e){return y[e]})).flatMap((function(e){return e}))),graphFlags:h})}},2787:function(e,r,n){"use strict";n.d(r,{I:function(){return s}});var t=n(5893),o=n(5193),i=n(5115),u=n(7294),a=n(7477);function l(e){return function(e){if(Array.isArray(e)){for(var r=0,n=new Array(e.length);r<e.length;r++)n[r]=e[r];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var s=function(){var e=(0,u.useContext)(a.B),r=e.displayTier,n=e.setDisplayTier,s=e.allTiers,c=(0,u.useMemo)((function(){return[{label:"Select All",tiers:s},{label:"Clear",tiers:[]},{label:"< T10",tiers:s.filter((function(e){return e<=10}))},{label:"< T20",tiers:s.filter((function(e){return e<=20}))},{label:"< T100",tiers:s.filter((function(e){return e<=100}))},{label:"> T500",tiers:s.filter((function(e){return e>=500}))}]}),[s]);return(0,t.jsxs)(i.kC,{w:"full",flexWrap:"wrap",mx:"auto",children:[c.map((function(e){return(0,t.jsx)(o.zx,{m:2,colorScheme:"blue",onClick:function(){return n(e.tiers)},children:e.label},e.label)})),s.sort((function(e,r){return e-r})).map((function(e){return(0,t.jsxs)(o.zx,{m:2,colorScheme:(null===r||void 0===r?void 0:r.includes(e))?"green":"gray",onClick:function(){return function(e){if(null===r||void 0===r?void 0:r.includes(e))return n((function(r){return r.filter((function(r){return r!==e}))}));n((function(r){return l(r||[]).concat([e])}))}(e)},children:["T",e]},e)}))]})}},8987:function(e,r,n){"use strict";n.d(r,{O:function(){return c},z:function(){return f}});var t=n(5893),o=n(7294),i=n(5277),u=n(4517),a=n(3688),l=n(7477);function s(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=[],t=!0,o=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(t=(u=a.next()).done)&&(n.push(u.value),!r||n.length!==r);t=!0);}catch(l){o=!0,i=l}finally{try{t||null==a.return||a.return()}finally{if(o)throw i}}return n}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var c=(0,o.createContext)({}),f=function(e){var r=e.children,f=e.all,d=(0,o.useContext)(a.V).points,h=(0,o.useContext)(l.B).points,v=(0,o.useContext)(u.A).event,p=(0,o.useRef)(),x=(0,o.useState)(),b=x[0],m=x[1],g=(0,o.useState)(),y=g[0],w=g[1],j=s((0,i._)("groupInterval",36e5),2),C=j[0],k=j[1],S=(0,o.useMemo)((function(){return(f?d:h||d)||[]}),[d,h]),O=function(e){var r=e.data,n=r.rate,t=r.forecast;m(n),w(t)};return(0,o.useEffect)((function(){return p.current=new Worker(new URL(n.p+n.u(951),n.b),{type:void 0}),p.current.postMessage({points:S,interval:C,event:v}),p.current.onmessage=O,function(){return p.current.removeEventListener("message",O),p.current.terminate()}}),[S,C]),(0,t.jsx)(c.Provider,{value:{rate:b,forecast:y,interval:C,setInterval:k},children:r})}}},function(e){e.O(0,[484,653,205,337,696,774,888,179],(function(){return r=9439,e(e.s=r);var r}));var r=e.O();_N_E=r}]);