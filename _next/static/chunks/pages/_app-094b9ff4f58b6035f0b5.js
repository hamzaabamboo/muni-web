(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[888,179],{22829:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Z}});var r=n(85893),o=n(26265),u=n(94536),i=n(40980),c=n(94096),a=n(67294),s=n(17179),f=n(64115),l=n(49444),p=function(){return(0,i.useColorModeValue)("gray.100","gray.600")},d=function(){var e=p();return(0,r.jsx)(c.k,{as:"footer",py:"20px",justifyContent:"center",bg:e,children:(0,r.jsxs)(f.x,{textAlign:"center",children:["Powered by"," ",(0,r.jsx)(l.r,{href:"https://www.youtube.com/watch?v=M2wZs7eHHVo",children:(0,r.jsx)(f.x,{as:"span",colorScheme:"blue",cursor:"pointer",mx:"2",children:"\u3080\u306b"})})," ","| If stuff breaks, just refresh or contact someone"]})})},m=n(48017),h=n(73979),v=function(){var e=(0,i.useColorMode)(),t=e.colorMode,n=e.toggleColorMode,o=p();return(0,r.jsx)(m.xu,{w:"100%",bg:o,children:(0,r.jsxs)(c.k,{justifyContent:"space-between",alignItems:["stretch",null,"center"],flexDirection:["column",null,"row"],w:["100%",null,"90%"],m:"0 auto",py:4,children:[(0,r.jsx)(l.r,{href:(0,h.Z)("/"),as:"a",_hover:{textDecor:"none"},children:(0,r.jsxs)(f.x,{textAlign:["center",null,"start"],fontSize:"2xl",fontWeight:"bold",px:2,children:[(0,r.jsx)(f.x,{as:"span",textDecor:"line-through",color:"red.400",children:"Muni"})," ","Towa Web (Please give me a proper name)"]})}),(0,r.jsxs)(c.k,{alignItems:"center",justifyContent:["space-between",null,"unset"],px:2,children:[(0,r.jsxs)(f.x,{mx:2,children:["Dark Mode",(0,r.jsx)(i.Switch,{mx:2,isChecked:"dark"===t,onChange:function(){return null===n||void 0===n?void 0:n()}})]}),(0,r.jsx)(l.r,{href:(0,h.Z)("/event"),_hover:{textDecor:"none"},as:"a",children:(0,r.jsx)(f.x,{fontSize:"lg",children:"View all events"})})]})]})})},x=function(e){var t=e.children,n=(0,a.useContext)(s.N).bgImage,o=(0,i.useColorMode)().colorMode;return(0,r.jsxs)(c.k,{flexDirection:"column",w:"full",minH:"100vh",alignItems:"stretch",backgroundImage:n&&"".concat("light"===o?"linear-gradient(to bottom, rgba(255,255, 255, .85), rgba(255,255, 255, .85))":"linear-gradient(to bottom, rgba(0,0, 0, .75), rgba(0,0, 0, .75))",", url(").concat(n,")"),backgroundSize:"cover",backgroundPosition:"center",backgroundAttachment:"fixed",backgroundBlendMode:"light"===o?"lighten":"darken",children:[(0,r.jsxs)(c.k,{as:"main",flexDirection:"column",alignItems:"stretch",justifyContent:"stretch",flex:1,children:[(0,r.jsx)(c.k,{justifyContent:"center",w:"full",children:(0,r.jsx)(v,{})}),(0,r.jsx)(c.k,{maxW:["100%",null,"90%"],flexDirection:"column",flex:"1",w:"full",mx:"auto",children:t})]}),(0,r.jsx)(d,{})]})},g=n(9008),b=function(e){var t=e.providers,n=e.children;return t.reverse().map((function(e){return e})).reduce((function(e,t){return(0,r.jsx)(t,{children:e})}),n)},j=n(25837),w=n(82965),y=n(34033),k=n(13451),O=(0,n(48764).B)({config:{initialColorMode:"light",useSystemColorMode:!1}});function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Z=function(e){var t=e.Component,n=e.pageProps,o=n.isStatic,i=n.head,c=n.backgroundImage,a=i||{},f=a.title,l=a.image,p=a.description,d=a.url;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(g.default,{children:[(0,r.jsx)("title",{children:f||"Create \u3080\u306b App"}),(0,r.jsx)("link",{rel:"icon",href:(0,h.Z)("/favicon.ico")}),(0,r.jsx)("meta",{property:"og:type",content:"website"}),(0,r.jsx)("meta",{property:"og:title",content:f||"Create \u3080\u306b App"}),(0,r.jsx)("meta",{property:"og:site_name",content:"Create \u3080\u306b App"}),(0,r.jsx)("meta",{property:"og:url",content:d||"https://hamzaabamboo.github.io/muni-web"}),"string"!==typeof l&&l?l.map((function(e,t){return(0,r.jsx)("meta",{property:"og:image",content:e},t)})):(0,r.jsx)("meta",{property:"og:image",content:l||(0,h.Z)("/images/munihappy.png")}),(0,r.jsx)("meta",{property:"og:description",content:p||"Munimunimunimunimuni"}),(0,r.jsx)("meta",{name:"twitter:card",content:"summary_large_image"}),(0,r.jsx)("meta",{name:"twitter:site",content:"@HamP_punipuni"}),(0,r.jsx)("meta",{name:"twitter:image:src",content:("string"===typeof l?l:null===l||void 0===l?void 0:l[0])||(0,h.Z)("/images/munihappy.png")}),(0,r.jsx)("meta",{name:"twitter:title",content:f||"Create \u3080\u306b App"}),(0,r.jsx)("meta",{name:"twitter:description",content:p||"Munimunimunimunimuni"})]}),(0,r.jsx)(s.f,{defaultImage:c,children:(0,r.jsx)(u.x,{theme:O,children:o?(0,r.jsx)(x,{children:(0,r.jsx)(t,P({},n))}):(0,r.jsx)(b,{providers:[j.d,k.K,w.U,y.t],children:(0,r.jsx)(x,{children:(0,r.jsx)(t,P({},n))})})})})]})}},47456:function(e,t,n){"use strict";n.d(t,{_n:function(){return i},bZ:function(){return c},x6:function(){return a}});var r=n(26265);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var i=function(e){return e.match("projectdivar")?"https://hambot.ham-san.net/d4dj/sig?url="+encodeURIComponent(e):e.match("d4-dj")?"https://hambot.ham-san.net/d4dj/d4db?url="+encodeURIComponent(e):e},c=function(e){return u(u({},e),{},{eventid:e.eventid+2})},a=function(e){if(e){if("string"===typeof e.type)return e.type;switch(e.type){case 0:return"Poker";case 1:return"Bingo";case 2:return"Medley";case 3:return"Raid";default:return e.type}}}},25837:function(e,t,n){"use strict";n.d(t,{A:function(){return h},d:function(){return v}});var r=n(85893),o=n(809),u=n.n(o),i=n(92447),c=n(9669),a=n.n(c),s=n(47456),f=function(){var e=(0,i.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a().get((0,s._n)("http://www.projectdivar.com/ev"));case 2:return t=e.sent,e.abrupt("return",(0,s.bZ)(t.data));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=n(54693),p=n(67294),d=n(73979),m=n(17179),h=(0,p.createContext)({}),v=function(e){var t=e.event,n=e.children,o=(0,p.useContext)(m.N).setBgImage,u=(0,p.useState)(t),i=u[0],c=u[1];t||(0,l.b)(f,c);var a=(0,p.useMemo)((function(){return i||t}),[i,t]);return(0,p.useEffect)((function(){a&&o((0,d.Z)("/images/events/background/".concat(a.eventid,".jpg")))}),[a]),(0,r.jsx)(h.Provider,{value:{event:a},children:n})}},82965:function(e,t,n){"use strict";n.d(t,{V:function(){return x},U:function(){return g}});var r=n(85893),o=n(59999),u=n(809),i=n.n(u),c=n(92447),a=n(9669),s=n.n(a),f=n(47456),l=function(){var e=(0,c.Z)(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s().get((0,f._n)("http://www.projectdivar.com/eventdata/t20?all=true&event=".concat(t-2)));case 2:return n=e.sent,e.abrupt("return",n.data.sort((function(e,t){return e.id-t.id})).map(f.bZ));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=n(54693),d=n(99490),m=n(67294),h=n(25837),v=n(13451),x=(0,m.createContext)({}),g=function(e){var t=e.children,n=(0,m.useContext)(v.G).lbData,u=(0,m.useContext)(h.A).event,i=(0,m.useState)(),c=i[0],a=i[1],s=(0,m.useRef)({}),f=(0,m.useCallback)((function(){return u?l(u.eventid):Promise.resolve(void 0)}),[u]);return(0,p.b)(f,a),(0,m.useEffect)((function(){if(n&&c){var e=n.filter((function(e){return!(s.current[e.rank]&&d.ou.fromISO(e.date).diff(s.current[e.rank]).as("seconds")<=0)&&(s.current[e.rank]=d.ou.fromISO(e.date),!0)}));e.length>0&&a((function(t){return[].concat((0,o.Z)(t),(0,o.Z)(e))}))}}),[n]),(0,r.jsx)(x.Provider,{value:{points:c},children:t})}},34033:function(e,t,n){"use strict";n.d(t,{X:function(){return f},t:function(){return l}});var r=n(85893),o=n(59999),u=n(99490),i=n(67294),c=n(25837),a=n(82965),s=n(13451),f=(0,i.createContext)({}),l=function(e){var t=e.children,n=(0,i.useContext)(s.G).lbData,l=(0,i.useContext)(a.V).points,p=(0,i.useContext)(c.A).event,d=(0,i.useState)({}),m=d[0],h=d[1],v=(0,i.useState)(),x=v[0],g=v[1],b=(0,i.useRef)();return(0,i.useEffect)((function(){!x&&l&&g(l.map((function(e){return{event:p.eventid,rank:e.rank,change:-1*Number(e.difference),date:e.date,points:e.points,name:e.name}})))}),[l]),(0,i.useEffect)((function(){if(p&&x){if(b.current){var e=[],t=n.map((function(t){var n,r=b.current.find((function(e){return e.rank===t.rank}));if(!r)return[t.rank,t.points];var o=t.points-r.points,i=o>0?o:u.ou.fromISO(t.date).diffNow().as("minutes")>-4&&null!==(n=m[t.rank])&&void 0!==n?n:0;return o>0&&e.push({event:p.eventid,rank:t.rank,change:i,date:t.date,points:t.points,name:t.name}),[t.rank,i]}));g((function(t){return[].concat((0,o.Z)(t),e)})),h(Object.fromEntries(t))}b.current=n}}),[n,p]),(0,r.jsx)(f.Provider,{value:{changes:m,pastUpdates:x},children:t})}},13451:function(e,t,n){"use strict";n.d(t,{G:function(){return m},K:function(){return h}});var r=n(85893),o=n(809),u=n.n(o),i=n(92447),c=n(59999),a=n(9669),s=n.n(a),f=n(47456),l=function(){var e=(0,i.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([s().get((0,f._n)("http://www.projectdivar.com/eventdata/t20")),s().get((0,f._n)("http://www.projectdivar.com/eventdata/t50"))]);case 2:return t=e.sent,e.abrupt("return",t.map((function(e){return e.data})).reduce((function(e,t){return[].concat((0,c.Z)(e),(0,c.Z)(t))})).sort((function(e,t){return e.rank-t.rank})).map(f.bZ));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=n(67294),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;return new Promise((function(t){return setTimeout(t,e)}))},m=(0,p.createContext)({}),h=function(e){var t=e.lbData,n=e.children,o=(0,p.useState)(),c=o[0],a=o[1],s=(0,p.useState)(),f=s[0],h=s[1],v=(0,p.useState)(2e4)[0];return(0,p.useEffect)((function(){if(!t){var e=!1;(function(){var t=(0,i.Z)(u().mark((function t(){var n;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=15;break}return t.prev=1,t.next=4,l();case 4:if(n=t.sent,!e){t.next=7;break}return t.abrupt("break",15);case 7:a(n),h(new Date);case 9:return t.prev=9,t.next=12,d(v);case 12:return t.finish(9);case 13:t.next=0;break;case 15:case"end":return t.stop()}}),t,null,[[1,,9,13]])})));return function(){return t.apply(this,arguments)}})()()}}),[v]),(0,r.jsx)(m.Provider,{value:{lbData:t||c,lastUpdated:f},children:n})}},17179:function(e,t,n){"use strict";n.d(t,{N:function(){return u},f:function(){return i}});var r=n(85893),o=n(67294),u=(0,o.createContext)({}),i=function(e){var t=e.defaultImage,n=e.children,i=(0,o.useState)(),c=i[0],a=i[1],s=(0,o.useCallback)((function(e){t||a(e)}),[t]);return(0,o.useEffect)((function(){t&&a(t)}),[t]),(0,r.jsx)(u.Provider,{value:{bgImage:c,setBgImage:s},children:n})}},54693:function(e,t,n){"use strict";n.d(t,{b:function(){return c}});var r=n(809),o=n.n(r),u=n(92447),i=n(67294),c=function(e,t){(0,i.useEffect)((function(){var n=!1;return function(){var r=(0,u.Z)(o().mark((function r(){var u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,"function"===typeof e?e():e;case 2:if(u=r.sent,!n){r.next=5;break}return r.abrupt("return");case 5:t(u);case 6:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}()(),function(){n=!0}}),[e,t])}},73979:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(26470),o=function(e){return(0,r.join)("/muni-web",e)}},76363:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return n(22829)}])},14453:function(){}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[774,809,351,980,659,433,24,217],(function(){return t(76363),t(72441)}));var n=e.O();_N_E=n}]);