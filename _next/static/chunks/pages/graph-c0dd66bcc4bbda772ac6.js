(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[645,179],{16071:function(e,t,n){"use strict";var r=n(53848),o=n(69448);t.default=void 0;var i=o(n(67294)),u=n(11689),a=n(72441),c=n(75749),s={};function l(e,t,n,r){if(e&&(0,u.isLocalURL)(t)){e.prefetch(t,n,r).catch((function(e){0}));var o=r&&"undefined"!==typeof r.locale?r.locale:e&&e.locale;s[t+"%"+n+(o?"%"+o:"")]=!0}}var f=function(e){var t=!1!==e.prefetch,n=(0,a.useRouter)(),o=n&&n.pathname||"/",f=i.default.useMemo((function(){var t=(0,u.resolveHref)(o,e.href,!0),n=r(t,2),i=n[0],a=n[1];return{href:i,as:e.as?(0,u.resolveHref)(o,e.as):a||i}}),[o,e.href,e.as]),d=f.href,p=f.as,h=e.children,v=e.replace,x=e.shallow,g=e.scroll,m=e.locale;"string"===typeof h&&(h=i.default.createElement("a",null,h));var b=i.Children.only(h),j=b&&"object"===typeof b&&b.ref,w=(0,c.useIntersection)({rootMargin:"200px"}),y=r(w,2),k=y[0],C=y[1],O=i.default.useCallback((function(e){k(e),j&&("function"===typeof j?j(e):"object"===typeof j&&(j.current=e))}),[j,k]);(0,i.useEffect)((function(){var e=C&&t&&(0,u.isLocalURL)(d),r="undefined"!==typeof m?m:n&&n.locale,o=s[d+"%"+p+(r?"%"+r:"")];e&&!o&&l(n,d,p,{locale:r})}),[p,d,C,m,t,n]);var E={ref:O,onClick:function(e){b.props&&"function"===typeof b.props.onClick&&b.props.onClick(e),e.defaultPrevented||function(e,t,n,r,o,i,a,c){("A"!==e.currentTarget.nodeName||!function(e){var t=e.currentTarget.target;return t&&"_self"!==t||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)&&(0,u.isLocalURL)(n))&&(e.preventDefault(),null==a&&(a=r.indexOf("#")<0),t[o?"replace":"push"](n,r,{shallow:i,locale:c,scroll:a}))}(e,n,d,p,v,x,g,m)},onMouseEnter:function(e){(0,u.isLocalURL)(d)&&(b.props&&"function"===typeof b.props.onMouseEnter&&b.props.onMouseEnter(e),l(n,d,p,{priority:!0}))}};if(e.passHref||"a"===b.type&&!("href"in b.props)){var L="undefined"!==typeof m?m:n&&n.locale,M=n&&n.isLocaleDomain&&(0,u.getDomainLocale)(p,L,n&&n.locales,n&&n.domainLocales);E.href=M||(0,u.addBasePath)((0,u.addLocale)(p,L,n&&n.defaultLocale))}return i.default.cloneElement(b,E)};t.default=f},75749:function(e,t,n){"use strict";var r=n(53848);t.__esModule=!0,t.useIntersection=function(e){var t=e.rootMargin,n=e.disabled||!u,c=(0,o.useRef)(),s=(0,o.useState)(!1),l=r(s,2),f=l[0],d=l[1],p=(0,o.useCallback)((function(e){c.current&&(c.current(),c.current=void 0),n||f||e&&e.tagName&&(c.current=function(e,t,n){var r=function(e){var t=e.rootMargin||"",n=a.get(t);if(n)return n;var r=new Map,o=new IntersectionObserver((function(e){e.forEach((function(e){var t=r.get(e.target),n=e.isIntersecting||e.intersectionRatio>0;t&&n&&t(n)}))}),e);return a.set(t,n={id:t,observer:o,elements:r}),n}(n),o=r.id,i=r.observer,u=r.elements;return u.set(e,t),i.observe(e),function(){u.delete(e),i.unobserve(e),0===u.size&&(i.disconnect(),a.delete(o))}}(e,(function(e){return e&&d(e)}),{rootMargin:t}))}),[n,t,f]);return(0,o.useEffect)((function(){if(!u&&!f){var e=(0,i.requestIdleCallback)((function(){return d(!0)}));return function(){return(0,i.cancelIdleCallback)(e)}}}),[f]),[p,f]};var o=n(67294),i=n(98391),u="undefined"!==typeof IntersectionObserver;var a=new Map},79122:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return w}});var r=n(85893),o=n(64121),i=n(67294),u=n(64115),a=n(48017),c=n(62974),s=n(13451),l=n(99490),f=n(69695),d=n.n(f),p=n(44263),h=n(68024),v=n(35277),x=n(70258),g=n(39538),m=n(45492),b=n(80184),j=n(69933);function w(){var e=(0,i.useContext)(s.G).lastUpdated,t=(0,i.useRef)(null),n=(0,v.tH)(t),f=(0,o.Z)(n,2),w=f[0],y=f[1],k=(0,m._)("graphFlags",{showTooltip:!1,advancedZoom:!1,showForecast:!1}),C=(0,o.Z)(k,2),O=C[0],E=C[1],L=(0,i.useMemo)((function(){var t=l.ou.fromJSDate(e).diffNow().as("milliseconds");return 0===t?"Just now":d()(t,{round:!0,largest:2})+" ago"}),[e]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.M,{}),(0,r.jsx)(h.W,{}),(0,r.jsxs)(u.x,{textAlign:"center",children:["Last Updated: ",L]}),(0,r.jsx)(b.Y,{graphFlags:O,setGraphFlags:E,forecastOptions:!0}),(0,r.jsx)(g.Q,{children:(0,r.jsxs)(j.z,{children:[(0,r.jsx)(a.xu,{ref:t,w:"full",h:"600px",children:(0,r.jsx)(x.q,{showForecast:O.showForecast,graphFlags:O,width:w,height:y})}),(0,r.jsx)(p.I,{})]})})]})}},80184:function(e,t,n){"use strict";n.d(t,{Y:function(){return l}});var r=n(85893),o=n(26265),i=n(94096),u=n(40980),a=n(64115);n(67294);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l=function(e){var t=e.graphFlags,n=e.setGraphFlags,c=e.forecastOptions,l=void 0!==c&&c,f=function(e){n((function(t){return s(s({},t),{},(0,o.Z)({},e,!t[e]))}))};return(0,r.jsx)(i.k,{flexDir:"column",children:(0,r.jsxs)(i.k,{flexDir:"column",children:[(0,r.jsxs)(i.k,{children:[(0,r.jsx)(u.Switch,{isChecked:t.showTooltip,onChange:function(){return f("showTooltip")}}),(0,r.jsx)(a.x,{ml:2,children:"Show Details on hover"})]}),(0,r.jsxs)(i.k,{children:[(0,r.jsx)(u.Switch,{isChecked:t.advancedZoom,onChange:function(){return f("advancedZoom")}}),(0,r.jsx)(a.x,{ml:2,children:"Advanced Zoom"})]}),l&&(0,r.jsxs)(i.k,{children:[(0,r.jsx)(u.Switch,{isChecked:t.showForecast,onChange:function(){return f("showForecast")}}),(0,r.jsx)(a.x,{ml:2,children:"Show Forecast (Muni may break, as usual)"})]})]})})}},68024:function(e,t,n){"use strict";n.d(t,{W:function(){return s}});var r=n(85893),o=n(94096),i=n(32800),u=n(41664),a=n(11163),c=(n(67294),[{label:"Muniboard",url:"/"},{label:"Player (Beta :kek:)",url:"/player"},{label:"Graph",url:"/graph"},{label:"Analyze",url:"/analyze"},{label:"Live",url:"/live"}]),s=function(){var e=(0,a.useRouter)();return(0,r.jsx)(o.k,{py:2,mb:2,justifyContent:["center","start"],flexWrap:"wrap",children:c.map((function(t){return(0,r.jsx)(i.z,{mx:2,p:2,rounded:"md",colorScheme:"blue",variant:e.pathname===t.url?"solid":"outline",fontSize:"lg",children:(0,r.jsx)(u.default,{href:t.url,children:t.label})},t.url)}))})}},70258:function(e,t,n){"use strict";n.d(t,{q:function(){return s}});var r=n(85893),o=n(67294),i=n(69933),u=n(25837),a=n(39538),c=n(57251),s=function(e){var t=e.width,n=e.height,s=e.isSmall,l=void 0!==s&&s,f=e.isLive,d=void 0!==f&&f,p=e.graphFlags,h=e.showForecast,v=void 0!==h&&h,x=(0,o.useContext)(a.B),g=x.points,m=x.displayTier,b=(0,o.useContext)(u.A).event,j=(0,o.useContext)(i.O).forecast;return(0,r.jsx)(c.k,{id:"score",points:g,startDate:null===b||void 0===b?void 0:b.startdate,endDate:null===b||void 0===b?void 0:b.enddate,width:t,height:n,isSmall:l,isLive:d,forecast:v&&(null===m||void 0===m?void 0:m.filter((function(e){return null===j||void 0===j?void 0:j[e]})).map((function(e){return j[e]})).flatMap((function(e){return e}))),graphFlags:p})}},44263:function(e,t,n){"use strict";n.d(t,{I:function(){return s}});var r=n(85893),o=n(59999),i=n(32800),u=n(94096),a=n(67294),c=n(39538),s=function(){var e=(0,a.useContext)(c.B),t=e.displayTier,n=e.setDisplayTier,s=e.allTiers,l=(0,a.useMemo)((function(){return[{label:"Select All",tiers:s},{label:"Clear",tiers:[]},{label:"< T10",tiers:s.filter((function(e){return e<=10}))},{label:"< T20",tiers:s.filter((function(e){return e<=20}))},{label:"< T100",tiers:s.filter((function(e){return e<=100}))},{label:"> T500",tiers:s.filter((function(e){return e>=500}))}]}),[s]);return(0,r.jsxs)(u.k,{w:"full",flexWrap:"wrap",mx:"auto",children:[l.map((function(e){return(0,r.jsx)(i.z,{m:2,colorScheme:"blue",onClick:function(){return n(e.tiers)},children:e.label},e.label)})),s.sort((function(e,t){return e-t})).map((function(e){return(0,r.jsxs)(i.z,{m:2,colorScheme:null!==t&&void 0!==t&&t.includes(e)?"green":"gray",onClick:function(){return function(e){if(null!==t&&void 0!==t&&t.includes(e))return n((function(t){return t.filter((function(t){return t!==e}))}));n((function(t){return[].concat((0,o.Z)(t||[]),[e])}))}(e)},children:["T",e]},e)}))]})}},69933:function(e,t,n){"use strict";n.d(t,{O:function(){return l},z:function(){return f}});var r=n(85893),o=n(64121),i=n(67294),u=n(35277),a=n(25837),c=n(82965),s=n(39538),l=(0,i.createContext)({}),f=function(e){var t=e.children,f=e.all,d=(0,i.useContext)(c.V).points,p=(0,i.useContext)(s.B).points,h=(0,i.useContext)(a.A).event,v=(0,i.useRef)(),x=(0,i.useState)(),g=x[0],m=x[1],b=(0,i.useState)(),j=b[0],w=b[1],y=(0,u._)("groupInterval",36e5),k=(0,o.Z)(y,2),C=k[0],O=k[1],E=(0,i.useMemo)((function(){return(f?d:p||d)||[]}),[d,p]),L=function(e){var t=e.data,n=t.rate,r=t.forecast;m(n),w(r)};return(0,i.useEffect)((function(){return v.current=new Worker(new URL(n.p+n.u(678),n.b),{type:void 0}),v.current.postMessage({points:E,interval:C,event:h}),v.current.onmessage=L,function(){return v.current.removeEventListener("message",L),v.current.terminate()}}),[E,C]),(0,r.jsx)(l.Provider,{value:{rate:g,forecast:j,interval:C,setInterval:O},children:t})}},29439:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/graph",function(){return n(79122)}])},41664:function(e,t,n){e.exports=n(16071)},11163:function(e,t,n){e.exports=n(72441)},14453:function(){}},function(e){e.O(0,[774,809,351,980,659,433,657,24,641,446,695,733],(function(){return t=29439,e(e.s=t);var t}));var t=e.O();_N_E=t}]);