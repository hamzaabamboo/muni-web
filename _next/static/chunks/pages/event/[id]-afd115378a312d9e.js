(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[781],{7017:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/event/[id]",function(){return r(1030)}])},1030:function(e,n,r){"use strict";r.r(n),r.d(n,{__N_SSG:function(){return z},default:function(){return M}});var t=r(5893),i=r(8527),o=r(5193),l=r(3756),u=r(2684),a=r(9042),c=r(6755),s=r(9490),f=r(7294),d=r(4517),h=r(3422),v=r(9867),x=r(8203),p=r(1213);function m(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function j(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){m(e,n,r[n])}))}return e}var b=function(e){var n=e.isSmall,r=(e.interval,e.isPlaying,e.onTierSelected),o=(0,f.useContext)(h.G).lbData,l=(0,f.useContext)(d.A).event,m=(0,u.Gc)();if(!o)return(0,t.jsx)(x.L,{});var b=n||"base"===m||"sm"===m,g=b&&{display:"none"},y=(0,f.useMemo)((function(){return Math.round(s.ou.fromISO(l.enddate).diff(s.ou.fromISO(l.startdate)).as("hours"))}),[l]);return(0,t.jsxs)(i.kC,{flexDir:"column",w:"full",children:[(0,t.jsx)(i.kC,{flexDir:"column",children:(0,t.jsx)(i.xv,{fontSize:"4xl",fontWeight:"bold",children:"Muniboard"})}),(0,t.jsxs)(a.iA,{size:"sm",children:[(0,t.jsx)(a.hr,{children:(0,t.jsxs)(a.Tr,{children:[(0,t.jsx)(a.Th,{textAlign:"center",children:"Rank"}),(0,t.jsx)(a.Th,{children:"Name"}),(0,t.jsx)(a.Th,{children:"Points"}),(0,t.jsx)(a.Th,j({},g,{children:"Rate/hr"}))]})}),(0,t.jsx)(a.p3,{children:o.map((function(e,n,o){return(0,t.jsxs)(a.Tr,{borderBottom:c.X.includes(e.rank)&&"2px solid",borderBottomColor:"gray.400",onClick:function(){return null===r||void 0===r?void 0:r(e.rank)},children:[(0,t.jsx)(a.Td,{textAlign:"center",children:(0,t.jsx)(p.K,{tier:e.rank,children:b?(0,v.a)(e.rank):e.rank})}),(0,t.jsxs)(a.Td,{children:[(0,t.jsx)(i.xv,{fontSize:b?"sm":"md",overflow:b?"ellipsis":"unset",children:e.name}),(0,t.jsx)(i.xv,j({fontSize:"xs"},g,{children:e.description}))]}),(0,t.jsx)(a.Td,{children:(0,t.jsx)(i.xv,{fontSize:b?"sm":"md",children:e.points})}),(0,t.jsx)(a.Td,{children:(0,t.jsx)(i.xv,{fontSize:b?"sm":"md",children:Math.round(e.points/y)})})]},e.rank)}))})]})]})},g=r(9380),y=r(5117),w=r(8889),k=r(3509),S=r(6701),C=r(2787),O=r(8976),T=r(3660),A=r(8987),_=r(7477),P=r(5277);function D(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=[],t=!0,i=!1,o=void 0;try{for(var l,u=e[Symbol.iterator]();!(t=(l=u.next()).done)&&(r.push(l.value),!n||r.length!==n);t=!0);}catch(a){i=!0,o=a}finally{try{t||null==u.return||u.return()}finally{if(i)throw o}}return r}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var z=!0;function M(e){var n=e.event,r=e.points,u=(0,f.useRef)(null),a=D((0,P.tH)(u),2),c=a[0],s=a[1],v=(0,f.useState)("point"),x=v[0],p=v[1],m=D((0,T._)("graphFlags",{showTooltip:!1,advancedZoom:!1}),2),j=m[0],z=m[1],M=(0,f.useMemo)((function(){return Array.from(new Set(r.map((function(e){return e.rank})))).map((function(e){var n=r.filter((function(n){return n.rank===e}));return n[(0,O.F_Y)(n,(function(e){return(0,O.ji_)(e.date)}))]})).map((function(e){return e})).sort((function(e,n){return e.rank-n.rank}))}),[r]);return(0,t.jsx)(d.d,{event:n,children:(0,t.jsx)(_.Q,{points:r,children:(0,t.jsx)(h.K,{lbData:M,children:(0,t.jsxs)(A.z,{children:[(0,t.jsx)(y.M,{}),(0,t.jsxs)(i.kC,{flexDir:["column",null,null,"row"],px:4,children:[(0,t.jsxs)(i.kC,{flexDir:"column",flex:1,children:[(0,t.jsxs)(i.kC,{children:[(0,t.jsx)(o.zx,{mx:4,p:2,rounded:"md",colorScheme:"blue",variant:"point"===x?"solid":"outline",onClick:function(){return p("point")},fontSize:"lg",children:"Point"}),(0,t.jsx)(o.zx,{mx:4,p:2,rounded:"md",colorScheme:"blue",variant:"rate"===x?"solid":"outline",onClick:function(){return p("rate")},fontSize:"lg",children:"Rate"})]}),"point"===x?(0,t.jsx)(i.xu,{ref:u,minH:"600px",children:(0,t.jsx)(S.q,{width:c,height:s,graphFlags:j,isSmall:!0})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(k.P,{graphFlags:j}),(0,t.jsx)(g.k,{})]}),(0,t.jsx)(w.Y,{graphFlags:j,setGraphFlags:z}),(0,t.jsx)(C.I,{}),(0,t.jsx)(i.xu,{w:"full",position:"relative",display:["none",null,null,"block"],children:(0,t.jsx)("img",{src:(0,l._n)("http://projectdivar.com:8080/event/t20_".concat(n.eventid-2,".png"))})})]}),(0,t.jsx)(i.kC,{flex:1,children:(0,t.jsx)(b,{})}),(0,t.jsx)(i.xu,{w:"full",position:"relative",display:["block",null,null,"none"],children:(0,t.jsx)("img",{src:(0,l._n)("http://projectdivar.com:8080/event/t20_".concat(n.eventid-2,".png"))})})]})]})})})})}},9380:function(e,n,r){"use strict";r.d(n,{k:function(){return c}});var t=r(5893),i=r(8527),o=r(1391),l=r(7294),u=r(8987),a=[{label:"1 Minute",value:6e4},{label:"2 Minutes",value:12e4},{label:"5 Minutes",value:3e5},{label:"10 Minutes",value:6e5},{label:"30 minutes",value:18e5},{label:"1 Hour",value:36e5},{label:"6 Hours",value:72e5},{label:"1 Day",value:864e5}],c=function(){var e=(0,l.useContext)(u.O),n=e.interval,r=e.setInterval;return(0,t.jsxs)(i.kC,{flexDir:"column",children:[(0,t.jsx)(i.xv,{my:1,fontWeight:"bold",as:"span",textAlign:"start",children:"Analysis Settings"}),(0,t.jsxs)(i.kC,{flexDir:"row",alignItems:"center",children:[(0,t.jsx)(i.xv,{mr:2,children:"Interval"}),(0,t.jsx)(o.Ph,{value:n,onChange:function(e){return r(Number(e.target.value))},children:a.map((function(e){return(0,t.jsx)("option",{value:e.value,children:e.label},e.value)}))})]})]})}},8889:function(e,n,r){"use strict";r.d(n,{Y:function(){return u}});var t=r(5893),i=r(8527),o=r(9033);r(7294);function l(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}var u=function(e){var n=e.graphFlags,r=e.setGraphFlags,u=e.forecastOptions,a=void 0!==u&&u,c=function(e){r((function(n){return function(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){l(e,n,r[n])}))}return e}({},n,l({},e,!n[e]))}))};return(0,t.jsx)(i.kC,{flexDir:"column",children:(0,t.jsxs)(i.kC,{flexDir:"column",children:[(0,t.jsxs)(i.kC,{children:[(0,t.jsx)(o.r,{isChecked:n.showTooltip,onChange:function(){return c("showTooltip")}}),(0,t.jsx)(i.xv,{ml:2,children:"Show Details on hover"})]}),(0,t.jsxs)(i.kC,{children:[(0,t.jsx)(o.r,{isChecked:n.advancedZoom,onChange:function(){return c("advancedZoom")}}),(0,t.jsx)(i.xv,{ml:2,children:"Advanced Zoom"})]}),a&&(0,t.jsxs)(i.kC,{children:[(0,t.jsx)(o.r,{isChecked:n.showForecast,onChange:function(){return c("showForecast")}}),(0,t.jsx)(i.xv,{ml:2,children:"Show Forecast (Muni may break, as usual)"})]})]})})}},3509:function(e,n,r){"use strict";r.d(n,{P:function(){return f}});var t=r(5893),i=r(8527),o=r(7294),l=r(8987),u=r(4517),a=r(5277),c=r(6453);function s(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=[],t=!0,i=!1,o=void 0;try{for(var l,u=e[Symbol.iterator]();!(t=(l=u.next()).done)&&(r.push(l.value),!n||r.length!==n);t=!0);}catch(a){i=!0,o=a}finally{try{t||null==u.return||u.return()}finally{if(i)throw o}}return r}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var f=function(e){var n=e.tier,r=e.graphFlags,f=(0,o.useContext)(l.O).rate,d=(0,o.useContext)(u.A).event,h=(0,o.useRef)(null),v=s((0,a.tH)(h),2),x=v[0],p=v[1],m=(0,o.useMemo)((function(){return null===f||void 0===f?void 0:f[n]}),[f,n]);return(0,t.jsx)(i.xu,{ref:h,minH:"300px",w:"full",children:(0,t.jsx)(c.k,{id:"Rate",startDate:null===d||void 0===d?void 0:d.startdate,endDate:null===d||void 0===d?void 0:d.enddate,width:x,height:p,graphFlags:null!==r&&void 0!==r?r:{advancedZoom:!1,showTooltip:!1},points:m||(f?Object.values(f).flatMap((function(e){return e})):[]),isSmall:!0})})}},6701:function(e,n,r){"use strict";r.d(n,{q:function(){return c}});var t=r(5893),i=r(7294),o=r(8987),l=r(4517),u=r(7477),a=r(6453),c=function(e){var n=e.width,r=e.height,c=e.isSmall,s=void 0!==c&&c,f=e.isLive,d=void 0!==f&&f,h=e.graphFlags,v=e.showForecast,x=void 0!==v&&v,p=(0,i.useContext)(u.B),m=p.points,j=p.displayTier,b=(0,i.useContext)(l.A).event,g=(0,i.useContext)(o.O).forecast;return(0,t.jsx)(a.k,{id:"score",points:m,startDate:null===b||void 0===b?void 0:b.startdate,endDate:null===b||void 0===b?void 0:b.enddate,width:n,height:r,isSmall:s,isLive:d,forecast:x&&(null===j||void 0===j?void 0:j.filter((function(e){return null===g||void 0===g?void 0:g[e]})).map((function(e){return g[e]})).flatMap((function(e){return e}))),graphFlags:h})}},1213:function(e,n,r){"use strict";r.d(n,{K:function(){return u}});var t=r(5893),i=r(8527),o=r(7294);function l(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}var u=(0,o.memo)((function(e){var n=e.tier,r=e.children,u=(0,o.useMemo)((function(){switch(n){case 1:return{fontSize:"xl",fontWeight:"bold",color:"yellow.400"};case 2:return{fontSize:"xl",fontWeight:"bold",color:"gray.400"};case 3:return{fontSize:"xl",fontWeight:"bold",color:"red.800"};case 10:case 50:case 100:case 500:case 1e3:case 2e3:case 5e3:case 1e4:case 2e4:case 3e4:case 5e4:return{fontSize:"xl",fontWeight:"bold"};default:return{}}}),[n]);return(0,t.jsx)(i.xv,function(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){l(e,n,r[n])}))}return e}({},u,{children:r||n}))}));u.displayName="Tier"},2787:function(e,n,r){"use strict";r.d(n,{I:function(){return c}});var t=r(5893),i=r(5193),o=r(8527),l=r(7294),u=r(7477);function a(e){return function(e){if(Array.isArray(e)){for(var n=0,r=new Array(e.length);n<e.length;n++)r[n]=e[n];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var c=function(){var e=(0,l.useContext)(u.B),n=e.displayTier,r=e.setDisplayTier,c=e.allTiers,s=(0,l.useMemo)((function(){return[{label:"Select All",tiers:c},{label:"Clear",tiers:[]},{label:"< T10",tiers:c.filter((function(e){return e<=10}))},{label:"< T20",tiers:c.filter((function(e){return e<=20}))},{label:"< T100",tiers:c.filter((function(e){return e<=100}))},{label:"> T500",tiers:c.filter((function(e){return e>=500}))}]}),[c]);return(0,t.jsxs)(o.kC,{w:"full",flexWrap:"wrap",mx:"auto",children:[s.map((function(e){return(0,t.jsx)(i.zx,{m:2,colorScheme:"blue",onClick:function(){return r(e.tiers)},children:e.label},e.label)})),c.sort((function(e,n){return e-n})).map((function(e){return(0,t.jsxs)(i.zx,{m:2,colorScheme:(null===n||void 0===n?void 0:n.includes(e))?"green":"gray",onClick:function(){return function(e){if(null===n||void 0===n?void 0:n.includes(e))return r((function(n){return n.filter((function(n){return n!==e}))}));r((function(n){return a(n||[]).concat([e])}))}(e)},children:["T",e]},e)}))]})}},8987:function(e,n,r){"use strict";r.d(n,{O:function(){return s},z:function(){return f}});var t=r(5893),i=r(7294),o=r(5277),l=r(4517),u=r(3688),a=r(7477);function c(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=[],t=!0,i=!1,o=void 0;try{for(var l,u=e[Symbol.iterator]();!(t=(l=u.next()).done)&&(r.push(l.value),!n||r.length!==n);t=!0);}catch(a){i=!0,o=a}finally{try{t||null==u.return||u.return()}finally{if(i)throw o}}return r}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var s=(0,i.createContext)({}),f=function(e){var n=e.children,f=e.all,d=(0,i.useContext)(u.V).points,h=(0,i.useContext)(a.B).points,v=(0,i.useContext)(l.A).event,x=(0,i.useRef)(),p=(0,i.useState)(),m=p[0],j=p[1],b=(0,i.useState)(),g=b[0],y=b[1],w=c((0,o._)("groupInterval",36e5),2),k=w[0],S=w[1],C=(0,i.useMemo)((function(){return(f?d:h||d)||[]}),[d,h]),O=function(e){var n=e.data,r=n.rate,t=n.forecast;j(r),y(t)};return(0,i.useEffect)((function(){return x.current=new Worker(new URL(r.p+r.u(951),r.b),{type:void 0}),x.current.postMessage({points:C,interval:k,event:v}),x.current.onmessage=O,function(){return x.current.removeEventListener("message",O),x.current.terminate()}}),[C,k]),(0,t.jsx)(s.Provider,{value:{rate:m,forecast:g,interval:k,setInterval:S},children:n})}}},function(e){e.O(0,[484,653,205,442,696,774,888,179],(function(){return n=7017,e(e.s=n);var n}));var n=e.O();_N_E=n}]);