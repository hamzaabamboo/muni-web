(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[781],{83346:function(e,r,t){"use strict";t.d(r,{iA:function(){return a},hr:function(){return f},p3:function(){return d},Th:function(){return h},Tr:function(){return p},Td:function(){return v}});var n=t(67294),i=t(11180),o=t(55284),l=t(54686);function s(){return(s=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function c(e,r){if(null==e)return{};var t,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)t=o[n],r.indexOf(t)>=0||(i[t]=e[t]);return i}var a=(0,i.forwardRef)(((e,r)=>{var t=(0,i.useMultiStyleConfig)("Table",e),a=(0,o.Lr)(e),{className:u}=a,f=c(a,["className"]);return n.createElement(i.StylesProvider,{value:t},n.createElement(i.chakra.table,s({role:"table",ref:r,__css:t.table,className:(0,l.cx)("chakra-table",u)},f)))}));l.__DEV__&&(a.displayName="Table");var u=(0,i.forwardRef)(((e,r)=>{var{placement:t="bottom"}=e,o=c(e,["placement"]),l=(0,i.useStyles)();return n.createElement(i.chakra.caption,s({},o,{ref:r,__css:s({},l.caption,{captionSide:t})}))}));l.__DEV__&&(u.displayName="TableCaption");var f=(0,i.forwardRef)(((e,r)=>{var t=(0,i.useStyles)();return n.createElement(i.chakra.thead,s({},e,{ref:r,__css:t.thead}))})),d=(0,i.forwardRef)(((e,r)=>{var t=(0,i.useStyles)();return n.createElement(i.chakra.tbody,s({},e,{ref:r,__css:t.tbody}))})),h=(0,i.forwardRef)(((e,r)=>{var{isNumeric:t}=e,o=c(e,["isNumeric"]),l=(0,i.useStyles)();return n.createElement(i.chakra.th,s({},o,{ref:r,__css:l.th,"data-is-numeric":t}))})),p=(0,i.forwardRef)(((e,r)=>{var t=(0,i.useStyles)();return n.createElement(i.chakra.tr,s({role:"row"},e,{ref:r,__css:t.tr}))})),v=(0,i.forwardRef)(((e,r)=>{var{isNumeric:t}=e,o=c(e,["isNumeric"]),l=(0,i.useStyles)();return n.createElement(i.chakra.td,s({role:"gridcell"},o,{ref:r,__css:l.td,"data-is-numeric":t}))}))},76162:function(e,r,t){"use strict";t.r(r),t.d(r,{__N_SSG:function(){return F},default:function(){return R}});var n=t(85893),i=t(64121),o=t(94096),l=t(32800),s=t(48017),c=t(47456),a=t(26265),u=t(54013),f=t(64115),d=t(83346),h=t(22594),p=t(99490),v=t(67294),x=t(25837),m=t(13451),j=t(4279),b=t(76529),g=t(53907);function y(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function O(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?y(Object(t),!0).forEach((function(r){(0,a.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):y(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var w=function(e){var r=e.isSmall,t=(e.interval,e.isPlaying,e.onTierSelected),i=(0,v.useContext)(m.G).lbData,l=(0,v.useContext)(x.A).event,s=(0,u.G)();if(!i)return(0,n.jsx)(b.L,{});var c=r||"base"===s||"sm"===s,a=c&&{display:"none"},y=(0,v.useMemo)((function(){return Math.round(p.ou.fromISO(l.enddate).diff(p.ou.fromISO(l.startdate)).as("hours"))}),[l]);return(0,n.jsxs)(o.k,{flexDir:"column",w:"full",children:[(0,n.jsx)(o.k,{flexDir:"column",children:(0,n.jsx)(f.x,{fontSize:"4xl",fontWeight:"bold",children:"Muniboard"})}),(0,n.jsxs)(d.iA,{size:"sm",children:[(0,n.jsx)(d.hr,{children:(0,n.jsxs)(d.Tr,{children:[(0,n.jsx)(d.Th,{textAlign:"center",children:"Rank"}),(0,n.jsx)(d.Th,{children:"Name"}),(0,n.jsx)(d.Th,{children:"Points"}),(0,n.jsx)(d.Th,O(O({},a),{},{children:"Rate/hr"}))]})}),(0,n.jsx)(d.p3,{children:i.map((function(e,r,i){return(0,n.jsxs)(d.Tr,{borderBottom:h.X.includes(e.rank)&&"2px solid",borderBottomColor:"gray.400",onClick:function(){return null===t||void 0===t?void 0:t(e.rank)},children:[(0,n.jsx)(d.Td,{textAlign:"center",children:(0,n.jsx)(g.K,{tier:e.rank,children:c?(0,j.a)(e.rank):e.rank})}),(0,n.jsxs)(d.Td,{children:[(0,n.jsx)(f.x,{fontSize:c?"sm":"md",overflow:c?"ellipsis":"unset",children:e.name}),(0,n.jsx)(f.x,O(O({fontSize:"xs"},a),{},{children:e.description}))]}),(0,n.jsx)(d.Td,{children:(0,n.jsx)(f.x,{fontSize:c?"sm":"md",children:e.points})}),(0,n.jsx)(d.Td,{children:(0,n.jsx)(f.x,{fontSize:c?"sm":"md",children:Math.round(e.points/y)})})]},e.rank)}))})]})]})},k=t(40506),S=t(62974),_=t(80184),P=t(54706),T=t(70258),C=t(44263),D=t(662),E=t(45492),M=t(69933),z=t(39538),N=t(35277),F=!0;function R(e){var r=e.event,t=e.points,a=(0,v.useRef)(null),u=(0,N.tH)(a),f=(0,i.Z)(u,2),d=f[0],h=f[1],p=(0,v.useState)("point"),j=p[0],b=p[1],g=(0,E._)("graphFlags",{showTooltip:!1,advancedZoom:!1}),y=(0,i.Z)(g,2),O=y[0],F=y[1],R=(0,v.useMemo)((function(){return Array.from(new Set(t.map((function(e){return e.rank})))).map((function(e){var r=t.filter((function(r){return r.rank===e}));return r[(0,D.F_Y)(r,(function(e){return(0,D.ji_)(e.date)}))]})).map((function(e){return e})).sort((function(e,r){return e.rank-r.rank}))}),[t]);return(0,n.jsx)(x.d,{event:r,children:(0,n.jsx)(z.Q,{points:t,children:(0,n.jsx)(m.K,{lbData:R,children:(0,n.jsxs)(M.z,{children:[(0,n.jsx)(S.M,{}),(0,n.jsxs)(o.k,{flexDir:["column",null,null,"row"],px:4,children:[(0,n.jsxs)(o.k,{flexDir:"column",flex:1,children:[(0,n.jsxs)(o.k,{children:[(0,n.jsx)(l.z,{mx:4,p:2,rounded:"md",colorScheme:"blue",variant:"point"===j?"solid":"outline",onClick:function(){return b("point")},fontSize:"lg",children:"Point"}),(0,n.jsx)(l.z,{mx:4,p:2,rounded:"md",colorScheme:"blue",variant:"rate"===j?"solid":"outline",onClick:function(){return b("rate")},fontSize:"lg",children:"Rate"})]}),"point"===j?(0,n.jsx)(s.xu,{ref:a,minH:"600px",children:(0,n.jsx)(T.q,{width:d,height:h,graphFlags:O,isSmall:!0})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(P.P,{graphFlags:O}),(0,n.jsx)(k.k,{})]}),(0,n.jsx)(_.Y,{graphFlags:O,setGraphFlags:F}),(0,n.jsx)(C.I,{}),(0,n.jsx)(s.xu,{w:"full",position:"relative",display:["none",null,null,"block"],children:(0,n.jsx)("img",{src:(0,c._n)("http://projectdivar.com:8080/event/t20_".concat(r.eventid-2,".png"))})})]}),(0,n.jsx)(o.k,{flex:1,children:(0,n.jsx)(w,{})}),(0,n.jsx)(s.xu,{w:"full",position:"relative",display:["block",null,null,"none"],children:(0,n.jsx)("img",{src:(0,c._n)("http://projectdivar.com:8080/event/t20_".concat(r.eventid-2,".png"))})})]})]})})})})}},40506:function(e,r,t){"use strict";t.d(r,{k:function(){return u}});var n=t(85893),i=t(94096),o=t(64115),l=t(40980),s=t(67294),c=t(69933),a=[{label:"1 Minute",value:6e4},{label:"2 Minutes",value:12e4},{label:"5 Minutes",value:3e5},{label:"10 Minutes",value:6e5},{label:"30 minutes",value:18e5},{label:"1 Hour",value:36e5},{label:"6 Hours",value:72e5},{label:"1 Day",value:864e5}],u=function(){var e=(0,s.useContext)(c.O),r=e.interval,t=e.setInterval;return(0,n.jsxs)(i.k,{flexDir:"column",children:[(0,n.jsx)(o.x,{my:1,fontWeight:"bold",as:"span",textAlign:"start",children:"Analysis Settings"}),(0,n.jsxs)(i.k,{flexDir:"row",alignItems:"center",children:[(0,n.jsx)(o.x,{mr:2,children:"Interval"}),(0,n.jsx)(l.Select,{value:r,onChange:function(e){return t(Number(e.target.value))},children:a.map((function(e){return(0,n.jsx)("option",{value:e.value,children:e.label},e.value)}))})]})]})}},80184:function(e,r,t){"use strict";t.d(r,{Y:function(){return u}});var n=t(85893),i=t(26265),o=t(94096),l=t(40980),s=t(64115);t(67294);function c(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function a(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?c(Object(t),!0).forEach((function(r){(0,i.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var u=function(e){var r=e.graphFlags,t=e.setGraphFlags,c=e.forecastOptions,u=void 0!==c&&c,f=function(e){t((function(r){return a(a({},r),{},(0,i.Z)({},e,!r[e]))}))};return(0,n.jsx)(o.k,{flexDir:"column",children:(0,n.jsxs)(o.k,{flexDir:"column",children:[(0,n.jsxs)(o.k,{children:[(0,n.jsx)(l.Switch,{isChecked:r.showTooltip,onChange:function(){return f("showTooltip")}}),(0,n.jsx)(s.x,{ml:2,children:"Show Details on hover"})]}),(0,n.jsxs)(o.k,{children:[(0,n.jsx)(l.Switch,{isChecked:r.advancedZoom,onChange:function(){return f("advancedZoom")}}),(0,n.jsx)(s.x,{ml:2,children:"Advanced Zoom"})]}),u&&(0,n.jsxs)(o.k,{children:[(0,n.jsx)(l.Switch,{isChecked:r.showForecast,onChange:function(){return f("showForecast")}}),(0,n.jsx)(s.x,{ml:2,children:"Show Forecast (Muni may break, as usual)"})]})]})})}},54706:function(e,r,t){"use strict";t.d(r,{P:function(){return f}});var n=t(85893),i=t(64121),o=t(48017),l=t(67294),s=t(69933),c=t(25837),a=t(35277),u=t(57251),f=function(e){var r=e.tier,t=e.graphFlags,f=(0,l.useContext)(s.O).rate,d=(0,l.useContext)(c.A).event,h=(0,l.useRef)(null),p=(0,a.tH)(h),v=(0,i.Z)(p,2),x=v[0],m=v[1],j=(0,l.useMemo)((function(){return null===f||void 0===f?void 0:f[r]}),[f,r]);return(0,n.jsx)(o.xu,{ref:h,minH:"300px",w:"full",children:(0,n.jsx)(u.k,{id:"Rate",startDate:null===d||void 0===d?void 0:d.startdate,endDate:null===d||void 0===d?void 0:d.enddate,width:x,height:m,graphFlags:null!==t&&void 0!==t?t:{advancedZoom:!1,showTooltip:!1},points:j||(f?Object.values(f).flatMap((function(e){return e})):[]),isSmall:!0})})}},70258:function(e,r,t){"use strict";t.d(r,{q:function(){return a}});var n=t(85893),i=t(67294),o=t(69933),l=t(25837),s=t(39538),c=t(57251),a=function(e){var r=e.width,t=e.height,a=e.isSmall,u=void 0!==a&&a,f=e.isLive,d=void 0!==f&&f,h=e.graphFlags,p=e.showForecast,v=void 0!==p&&p,x=(0,i.useContext)(s.B),m=x.points,j=x.displayTier,b=(0,i.useContext)(l.A).event,g=(0,i.useContext)(o.O).forecast;return(0,n.jsx)(c.k,{id:"score",points:m,startDate:null===b||void 0===b?void 0:b.startdate,endDate:null===b||void 0===b?void 0:b.enddate,width:r,height:t,isSmall:u,isLive:d,forecast:v&&(null===j||void 0===j?void 0:j.filter((function(e){return null===g||void 0===g?void 0:g[e]})).map((function(e){return g[e]})).flatMap((function(e){return e}))),graphFlags:h})}},53907:function(e,r,t){"use strict";t.d(r,{K:function(){return a}});var n=t(26265),i=t(85893),o=t(64115),l=t(67294);function s(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function c(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?s(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var a=(0,l.memo)((function(e){var r=e.tier,t=e.children,n=(0,l.useMemo)((function(){switch(r){case 1:return{fontSize:"xl",fontWeight:"bold",color:"yellow.400"};case 2:return{fontSize:"xl",fontWeight:"bold",color:"gray.400"};case 3:return{fontSize:"xl",fontWeight:"bold",color:"red.800"};case 10:case 50:case 100:case 500:case 1e3:case 2e3:case 5e3:case 1e4:case 2e4:case 3e4:case 5e4:return{fontSize:"xl",fontWeight:"bold"};default:return{}}}),[r]);return(0,i.jsx)(o.x,c(c({},n),{},{children:t||r}))}));a.displayName="Tier"},44263:function(e,r,t){"use strict";t.d(r,{I:function(){return a}});var n=t(85893),i=t(59999),o=t(32800),l=t(94096),s=t(67294),c=t(39538),a=function(){var e=(0,s.useContext)(c.B),r=e.displayTier,t=e.setDisplayTier,a=e.allTiers,u=(0,s.useMemo)((function(){return[{label:"Select All",tiers:a},{label:"Clear",tiers:[]},{label:"< T10",tiers:a.filter((function(e){return e<=10}))},{label:"< T20",tiers:a.filter((function(e){return e<=20}))},{label:"< T100",tiers:a.filter((function(e){return e<=100}))},{label:"> T500",tiers:a.filter((function(e){return e>=500}))}]}),[a]);return(0,n.jsxs)(l.k,{w:"full",flexWrap:"wrap",mx:"auto",children:[u.map((function(e){return(0,n.jsx)(o.z,{m:2,colorScheme:"blue",onClick:function(){return t(e.tiers)},children:e.label},e.label)})),a.sort((function(e,r){return e-r})).map((function(e){return(0,n.jsxs)(o.z,{m:2,colorScheme:null!==r&&void 0!==r&&r.includes(e)?"green":"gray",onClick:function(){return function(e){if(null!==r&&void 0!==r&&r.includes(e))return t((function(r){return r.filter((function(r){return r!==e}))}));t((function(r){return[].concat((0,i.Z)(r||[]),[e])}))}(e)},children:["T",e]},e)}))]})}},69933:function(e,r,t){"use strict";t.d(r,{O:function(){return u},z:function(){return f}});var n=t(85893),i=t(64121),o=t(67294),l=t(35277),s=t(25837),c=t(82965),a=t(39538),u=(0,o.createContext)({}),f=function(e){var r=e.children,f=e.all,d=(0,o.useContext)(c.V).points,h=(0,o.useContext)(a.B).points,p=(0,o.useContext)(s.A).event,v=(0,o.useRef)(),x=(0,o.useState)(),m=x[0],j=x[1],b=(0,o.useState)(),g=b[0],y=b[1],O=(0,l._)("groupInterval",36e5),w=(0,i.Z)(O,2),k=w[0],S=w[1],_=(0,o.useMemo)((function(){return(f?d:h||d)||[]}),[d,h]),P=function(e){var r=e.data,t=r.rate,n=r.forecast;j(t),y(n)};return(0,o.useEffect)((function(){return v.current=new Worker(new URL(t.p+t.u(678),t.b),{type:void 0}),v.current.postMessage({points:_,interval:k,event:p}),v.current.onmessage=P,function(){return v.current.removeEventListener("message",P),v.current.terminate()}}),[_,k]),(0,n.jsx)(u.Provider,{value:{rate:m,forecast:g,interval:k,setInterval:S},children:r})}},87017:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/event/[id]",function(){return t(76162)}])}},function(e){e.O(0,[774,809,351,980,659,657,24,641,446,733],(function(){return r=87017,e(e.s=r);var r}));var r=e.O();_N_E=r}]);