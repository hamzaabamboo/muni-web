(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[739],{3346:function(e,r,t){"use strict";t.d(r,{iA:function(){return c},hr:function(){return d},p3:function(){return f},Th:function(){return h},Tr:function(){return x},Td:function(){return m}});var n=t(7294),i=t(1180),o=t(5284),s=t(4686);function a(){return(a=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function l(e,r){if(null==e)return{};var t,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)t=o[n],r.indexOf(t)>=0||(i[t]=e[t]);return i}var c=(0,i.forwardRef)(((e,r)=>{var t=(0,i.useMultiStyleConfig)("Table",e),c=(0,o.Lr)(e),{className:u}=c,d=l(c,["className"]);return n.createElement(i.StylesProvider,{value:t},n.createElement(i.chakra.table,a({role:"table",ref:r,__css:t.table,className:(0,s.cx)("chakra-table",u)},d)))}));s.__DEV__&&(c.displayName="Table");var u=(0,i.forwardRef)(((e,r)=>{var{placement:t="bottom"}=e,o=l(e,["placement"]),s=(0,i.useStyles)();return n.createElement(i.chakra.caption,a({},o,{ref:r,__css:a({},s.caption,{captionSide:t})}))}));s.__DEV__&&(u.displayName="TableCaption");var d=(0,i.forwardRef)(((e,r)=>{var t=(0,i.useStyles)();return n.createElement(i.chakra.thead,a({},e,{ref:r,__css:t.thead}))})),f=(0,i.forwardRef)(((e,r)=>{var t=(0,i.useStyles)();return n.createElement(i.chakra.tbody,a({},e,{ref:r,__css:t.tbody}))})),h=(0,i.forwardRef)(((e,r)=>{var{isNumeric:t}=e,o=l(e,["isNumeric"]),s=(0,i.useStyles)();return n.createElement(i.chakra.th,a({},o,{ref:r,__css:s.th,"data-is-numeric":t}))})),x=(0,i.forwardRef)(((e,r)=>{var t=(0,i.useStyles)();return n.createElement(i.chakra.tr,a({role:"row"},e,{ref:r,__css:t.tr}))})),m=(0,i.forwardRef)(((e,r)=>{var{isNumeric:t}=e,o=l(e,["isNumeric"]),s=(0,i.useStyles)();return n.createElement(i.chakra.td,a({role:"gridcell"},o,{ref:r,__css:s.td,"data-is-numeric":t}))}))},4649:function(e,r,t){"use strict";t.d(r,{s:function(){return O}});var n=t(6265),i=t(5893),o=t(7294),s=t(3346),a=t(4013),l=t(4096),c=t(4115),u=t(9490),d=t(2594),f=t(9695),h=t.n(f),x=t(7216),m=t(3187),p=t(3451),j=t(6529),v=t(4279),b=t(4033);function y(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function g(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?y(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):y(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var O=function(e){var r=e.isSmall,t=(e.interval,e.isPlaying),n=void 0===t||t,f=e.onTierSelected,m=(0,o.useContext)(p.G),y=m.lbData,O=m.lastUpdated,T=(0,o.useContext)(b.X).changes,N=(0,o.useContext)(x.A).event,P=(0,a.G)(),_=(0,o.useMemo)((function(){var e=u.ou.fromJSDate(O).diffNow().as("milliseconds");return 0===e?"Just now":h()(e,{round:!0,largest:2})+" ago"}),[O]);if(!y)return(0,i.jsx)(j.L,{});var C=r||"base"===P||"sm"===P,D=C&&{display:"none"};return(0,i.jsxs)(l.k,{flexDir:"column",children:[(0,i.jsxs)(l.k,{flexDir:"column",children:[(0,i.jsx)(c.x,{fontSize:"4xl",fontWeight:"bold",children:"Muniboard"}),(0,i.jsxs)(c.x,{fontSize:"sm",as:"span",fontWeight:"normal",children:["Last Updated: ",_]})]}),(0,i.jsxs)(s.iA,{size:"sm",children:[(0,i.jsx)(s.hr,{children:(0,i.jsxs)(s.Tr,{children:[(0,i.jsx)(s.Th,{textAlign:"center",children:"Rank"}),(0,i.jsx)(s.Th,{children:"Name"}),(0,i.jsx)(s.Th,{children:"Points"}),(0,i.jsx)(s.Th,g(g({textAlign:"end"},D),{},{children:"Gap"})),(0,i.jsx)(s.Th,g(g({textAlign:"end"},D),{},{children:"Rate"})),(0,i.jsx)(s.Th,g(g({textAlign:"end",whiteSpace:"break-spaces"},D),{},{children:"Time to boat"})),(0,i.jsx)(s.Th,{children:"Last Updated"})]})}),(0,i.jsx)(s.p3,{children:y.map((function(e,r,t){var o,a,l,h,x,m;return(0,i.jsxs)(s.Tr,g(g({},n?k(e,null===T||void 0===T?void 0:T[e.rank],null===N||void 0===N?void 0:N.type):{}),{},{borderBottom:d.X.includes(e.rank)&&"2px solid",borderBottomColor:"gray.400",onClick:function(){return null===f||void 0===f?void 0:f(e.rank)},children:[(0,i.jsx)(s.Td,{textAlign:"center",children:(0,i.jsx)(S,{tier:e.rank,children:C?(0,v.a)(e.rank):e.rank})}),(0,i.jsxs)(s.Td,{children:[(0,i.jsx)(c.x,{fontSize:C?"sm":"md",overflow:C?"ellipsis":"unset",children:e.name}),(0,i.jsx)(c.x,g(g({fontSize:"xs"},D),{},{children:e.description}))]}),(0,i.jsxs)(s.Td,{children:[(0,i.jsx)(c.x,{fontSize:C?"sm":"md",children:e.points}),(null===T||void 0===T?void 0:T[e.rank])>0&&(0,i.jsxs)(c.x,{fontSize:"xs",children:["(+",null!==(o=T[e.rank])&&void 0!==o?o:0,")"]})]}),(0,i.jsx)(s.Td,g(g({isNumeric:!0},D),{},{children:r+1<t.length?e.points-(null===(a=t[r+1])||void 0===a?void 0:a.points):0})),(0,i.jsx)(s.Td,g(g({isNumeric:!0},D),{},{children:e.rate})),(0,i.jsx)(s.Td,g(g({isNumeric:!0},D),{},{children:r+1<t.length&&!isNaN(Number(null===(l=t[r+1])||void 0===l?void 0:l.rate))?w((e.points-(null===(h=t[r+1])||void 0===h?void 0:h.points))/(Number(null===(x=t[r+1])||void 0===x?void 0:x.rate)-Number("???"===e.rate?0:e.rate))*60*60*1e3):"-"})),(0,i.jsx)(s.Td,{children:(m=e.date,u.ou.fromISO(m).diffNow().as("minute")>-3?"Just now":u.ou.now().diff(u.ou.fromISO(m)).toFormat("hh:mm"))})]}),e.rank)}))})]})]})},k=function(e,r,t){var n,i;return null===(n=r>(null===(i=m.y[t])||void 0===i?void 0:i.maxPerGame))||void 0===n||n?{bg:"red.100"}:u.ou.fromISO(e.date).diffNow().as("minutes")<-10?{}:{bg:"gray.100"}},w=function(e){return isNaN(e)||e<0?"--:--":u.nL.fromMillis(e).toFormat("hh:mm")},S=(0,o.memo)((function(e){var r=e.tier,t=e.children,n=(0,o.useMemo)((function(){switch(r){case 1:return{fontSize:"xl",fontWeight:"bold",color:"yellow.400"};case 2:return{fontSize:"xl",fontWeight:"bold",color:"gray.400"};case 3:return{fontSize:"xl",fontWeight:"bold",color:"red.800"};case 10:case 50:case 100:case 500:case 1e3:case 2e3:case 5e3:case 1e4:case 2e4:case 3e4:case 5e4:return{fontSize:"xl",fontWeight:"bold"};default:return{}}}),[r]);return(0,i.jsx)(c.x,g(g({},n),{},{children:t||r}))}))},3411:function(e,r,t){"use strict";t.d(r,{z:function(){return O}});var n=t(5893),i=t(980),o=t(4096),s=t(4115),a=t(6185),l=t(9490),c=t(7294),u=t(4033),d=t(3451),f=t(8017),h=t(3346),x=t(3187),m=t(7216),p=function(e){var r,t=e.tier,i=(0,c.useContext)(u.X),o=i.pastUpdates,a=(i.changes,(0,c.useContext)(m.A).event),d=(0,c.useMemo)((function(){return a&&x.y[a.type]}),[a]),p=(0,c.useMemo)((function(){var e;return null===(e=o[t])||void 0===e?void 0:e.sort((function(e,r){return l.ou.fromISO(r.date).diff(l.ou.fromISO(e.date)).as("minutes")}))}),[o,d,t]);return(0,n.jsx)(f.xu,{h:"full",w:"full",position:"relative",maxH:"600px",overflowX:"auto",children:(0,n.jsxs)(h.iA,{size:"sm",variant:"simple",children:[(0,n.jsx)(h.hr,{children:(0,n.jsxs)(h.Tr,{children:[(0,n.jsx)(h.Th,{children:"Change"}),(0,n.jsx)(h.Th,{children:"Points"}),(0,n.jsx)(h.Th,{children:"Date/Time"})]})}),(0,n.jsx)(h.p3,{children:null!==(r=null===p||void 0===p?void 0:p.map((function(e){return(0,n.jsxs)(h.Tr,{bg:d&&e.change>d.maxPerGame?"red.200":"unset",children:[(0,n.jsxs)(h.Td,{children:["+",e.change]}),(0,n.jsx)(h.Td,{children:e.point}),(0,n.jsx)(h.Td,{children:l.ou.fromISO(e.date).toFormat("HH:mm:ss dd/MM/yyyy")})]},e.date)})))&&void 0!==r?r:(0,n.jsx)(h.Tr,{children:(0,n.jsx)(h.Td,{colSpan:3,children:(0,n.jsx)(s.x,{textAlign:"center",children:"No data yet, Collecting Data..."})})})})]})})},j=t(4121),v=t(2965),b=t(5277),y=t(7251),g=function(e){var r=e.tier,t=(0,c.useContext)(v.V).points,i=(0,c.useContext)(m.A).event,o=(0,c.useRef)(null),s=(0,b.tH)(o),a=(0,j.Z)(s,2),l=a[0],u=a[1],d=(0,c.useMemo)((function(){return t.filter((function(e){return e.rank===r}))}),[r,t]);return(0,n.jsx)(f.xu,{ref:o,minH:"300px",w:"full",children:(0,n.jsx)(y.k,{id:"t".concat(r),startDate:i.startdate,endDate:null===i||void 0===i?void 0:i.enddate,width:l,height:u,points:d,isSmall:!0})})},O=function(e){var r=e.tier,t=e.onClose,f=(0,c.useContext)(u.X).changes,h=(0,c.useContext)(d.G).lbData,x=!!r,m=null===h||void 0===h?void 0:h.find((function(e){return e.rank===r}));return m?(0,n.jsxs)(i.Modal,{isOpen:x,size:"4xl",onClose:t,children:[(0,n.jsx)(i.ModalOverlay,{}),(0,n.jsxs)(i.ModalContent,{children:[(0,n.jsxs)(i.ModalHeader,{children:["T",r," Details"]}),(0,n.jsx)(i.ModalCloseButton,{}),(0,n.jsx)(i.ModalBody,{children:(0,n.jsxs)(o.k,{flexDir:["column",null,"row"],children:[(0,n.jsxs)(o.k,{flexDir:"column",flex:1,px:2,children:[(0,n.jsxs)(s.x,{children:[(0,n.jsx)(s.x,{fontWeight:"bold",as:"span",children:"Current player"}),": ",m.name]}),(0,n.jsxs)(s.x,{children:[(0,n.jsx)(s.x,{fontWeight:"bold",as:"span",children:"Points"}),": ",m.points]}),m.rate&&(0,n.jsxs)(s.x,{children:[(0,n.jsx)(s.x,{fontWeight:"bold",as:"span",children:"Rate"}),": ",m.rate]}),(0,n.jsxs)(s.x,{children:[(0,n.jsx)(s.x,{fontWeight:"bold",as:"span",children:"Last Update"}),": +",f[r]]}),(0,n.jsxs)(s.x,{children:[(0,n.jsx)(s.x,{fontWeight:"bold",as:"span",children:"Last Updated"}),": ",l.ou.fromISO(m.date).toFormat("HH:mm:ss dd/MM/yyyy")," ","(",l.ou.now().diff(l.ou.fromISO(m.date)).toFormat("hh:mm"),")"]}),(0,n.jsx)(g,{tier:r})]}),(0,n.jsx)(o.k,{minH:"600px",children:(0,n.jsx)(p,{tier:r})})]})}),(0,n.jsx)(i.ModalFooter,{children:(0,n.jsx)(a.z,{colorScheme:"red",mr:3,onClick:t,children:"Close"})})]})]}):null}},3187:function(e,r,t){"use strict";t.d(r,{y:function(){return n}});var n={Medley:{maxPerGame:2700}}},4033:function(e,r,t){"use strict";t.d(r,{X:function(){return d},t:function(){return f}});var n=t(5893),i=t(6265),o=t(4121),s=t(5492),a=t(9490),l=t(7294),c=t(3451);function u(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}var d=(0,l.createContext)({}),f=function(e){var r=e.children,t=(0,l.useContext)(c.G).lbData,f=(0,l.useState)({}),h=f[0],x=f[1],m=(0,s._)("pastUpdates",{}),p=(0,o.Z)(m,2),j=p[0],v=p[1],b=(0,l.useRef)();return(0,l.useEffect)((function(){if(b.current){var e=[],r=t.map((function(r){var t,n=b.current.find((function(e){return e.rank===r.rank})),i=r.points-n.points,o=i>0?i:a.ou.fromISO(r.date).diffNow().as("minutes")>-4&&null!==(t=h[r.rank])&&void 0!==t?t:0;return i>0&&e.push([r.rank,{change:o,date:r.date,point:r.points}]),[r.rank,o]}));v((function(r){var t=function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?u(Object(t),!0).forEach((function(r){(0,i.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({},r);return e.forEach((function(e){var r=(0,o.Z)(e,2),n=r[0],i=r[1];n in t||(t[n]=[]),t[n].push(i)})),t})),x(Object.fromEntries(r))}b.current=t}),[t]),(0,n.jsx)(d.Provider,{value:{changes:h,pastUpdates:j},children:r})}},6265:function(e,r,t){"use strict";function n(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}t.d(r,{Z:function(){return n}})}}]);