(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[12,179],{506:function(e,n,t){"use strict";t.d(n,{k:function(){return c}});var r=t(5893),i=t(4096),o=t(4115),a=t(980),s=t(7294),l=t(9933),u=[{label:"1 Minute",value:6e4},{label:"2 Minutes",value:12e4},{label:"5 Minutes",value:3e5},{label:"10 Minutes",value:6e5},{label:"30 minutes",value:18e5},{label:"1 Hour",value:36e5},{label:"6 Hours",value:72e5},{label:"1 Day",value:864e5}],c=function(){var e=(0,s.useContext)(l.O),n=e.interval,t=e.setInterval;return(0,r.jsxs)(i.k,{flexDir:"column",children:[(0,r.jsx)(o.x,{my:1,fontWeight:"bold",as:"span",textAlign:"start",children:"Analysis Settings"}),(0,r.jsxs)(i.k,{flexDir:"row",alignItems:"center",children:[(0,r.jsx)(o.x,{mr:2,children:"Interval"}),(0,r.jsx)(a.Select,{value:n,onChange:function(e){return t(Number(e.target.value))},children:u.map((function(e){return(0,r.jsx)("option",{value:e.value,children:e.label},e.value)}))})]})]})}},4816:function(e,n,t){"use strict";t.d(n,{s:function(){return O}});var r=t(6265),i=t(5893),o=t(4013),a=t(4096),s=t(4115),l=t(3346),u=t(2594),c=t(9695),d=t.n(c),f=t(9490),h=t(7294),x=t(5837),p=t(7933),m=t(3451),v=t(4279),j=t(3187),b=t(6529),g=t(3907);function y(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function k(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?y(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):y(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var O=function(e){var n=e.isSmall,t=(e.interval,e.isPlaying),r=void 0===t||t,c=e.onTierSelected,y=(0,h.useContext)(m.G),O=y.lbData,w=y.lastUpdated,S=(0,h.useContext)(p.X).changes,C=(0,h.useContext)(x.A).event,P=(0,o.G)(),D=(0,h.useMemo)((function(){var e=f.ou.fromJSDate(w).diffNow().as("milliseconds");return 0===e?"Just now":d()(e,{round:!0,largest:2})+" ago"}),[w]);if(!O)return(0,i.jsx)(b.L,{});var M=n||"base"===P||"sm"===P,z=M&&{display:"none"};return(0,i.jsxs)(a.k,{flexDir:"column",children:[(0,i.jsxs)(a.k,{flexDir:"column",children:[(0,i.jsx)(s.x,{fontSize:"2xl",fontWeight:"bold",children:"Muniboard"}),(0,i.jsxs)(s.x,{fontSize:"sm",as:"span",fontWeight:"normal",children:["Last Updated: ",D]})]}),(0,i.jsxs)(l.iA,{size:"sm",children:[(0,i.jsx)(l.hr,{children:(0,i.jsxs)(l.Tr,{children:[(0,i.jsx)(l.Th,{textAlign:"center",children:"Rank"}),(0,i.jsx)(l.Th,{children:"Name"}),(0,i.jsx)(l.Th,{children:"Points"}),(0,i.jsx)(l.Th,k(k({textAlign:"end"},z),{},{children:"Gap"})),(0,i.jsx)(l.Th,k(k({textAlign:"end"},z),{},{children:"Rate"})),(0,i.jsx)(l.Th,k(k({textAlign:"end",whiteSpace:"break-spaces"},z),{},{children:"Time to boat"})),(0,i.jsx)(l.Th,{children:"Last Updated"})]})}),(0,i.jsx)(l.p3,{children:O.map((function(e,n,t){var o,a,d,h,x,p,m;return(0,i.jsxs)(l.Tr,k(k({},r?function(e,n,t){var r,i;return null===(r=n>(null===(i=j.y[t])||void 0===i?void 0:i.maxPerGame))||void 0===r||r?{bg:"red.100"}:f.ou.fromISO(e.date).diffNow().as("minutes")<-10?{}:{bg:"gray.100"}}(e,null===S||void 0===S?void 0:S[e.rank],null===C||void 0===C?void 0:C.type):{}),{},{borderBottom:u.X.includes(e.rank)&&"2px solid",borderBottomColor:"gray.400",onClick:function(){return null===c||void 0===c?void 0:c(e.rank)},children:[(0,i.jsx)(l.Td,{textAlign:"center",children:(0,i.jsx)(g.K,{tier:e.rank,children:M?(0,v.a)(e.rank):e.rank})}),(0,i.jsxs)(l.Td,{children:[(0,i.jsx)(s.x,{fontSize:M?"sm":"md",overflow:M?"ellipsis":"unset",children:e.name}),(0,i.jsx)(s.x,k(k({fontSize:"xs"},z),{},{children:e.description}))]}),(0,i.jsxs)(l.Td,{children:[(0,i.jsx)(s.x,{fontSize:M?"sm":"md",children:e.points}),(null===S||void 0===S?void 0:S[e.rank])>0&&(0,i.jsxs)(s.x,{fontSize:"xs",children:["(+",null!==(o=S[e.rank])&&void 0!==o?o:0,")"]})]}),(0,i.jsx)(l.Td,k(k({isNumeric:!0},z),{},{children:n+1<t.length?e.points-(null===(a=t[n+1])||void 0===a?void 0:a.points):0})),(0,i.jsx)(l.Td,k(k({isNumeric:!0},z),{},{children:e.rate})),(0,i.jsx)(l.Td,k(k({isNumeric:!0},z),{},{children:n+1<t.length&&!isNaN(Number(null===(d=t[n+1])||void 0===d?void 0:d.rate))?(m=(e.points-(null===(h=t[n+1])||void 0===h?void 0:h.points))/(Number(null===(x=t[n+1])||void 0===x?void 0:x.rate)-Number("???"===e.rate?0:e.rate))*60*60*1e3,isNaN(m)||m<0?"--:--":f.nL.fromMillis(m).toFormat("hh:mm")):"-"})),(0,i.jsx)(l.Td,{children:(p=e.date,f.ou.fromISO(p).diffNow().as("minute")>-3?"Just now":f.ou.now().diff(f.ou.fromISO(p)).toFormat("hh:mm"))})]}),e.rank)}))})]})]})}},8024:function(e,n,t){"use strict";t.d(n,{W:function(){return l}});var r=t(5893),i=t(4096),o=t(8017),a=t(1664),s=t(1163),l=function(){var e=(0,s.useRouter)();return(0,r.jsxs)(i.k,{py:2,justifyContent:["center","start"],children:[(0,r.jsx)(o.xu,{mx:4,p:2,rounded:"md",bg:"/"===e.pathname?"gray.200":"transparent",color:"/"===e.pathname?"blue.400":"black",fontSize:"lg",children:(0,r.jsx)(a.default,{href:"/",children:"Muniboard"})}),(0,r.jsx)(o.xu,{mx:4,p:2,rounded:"md",bg:"/graph"===e.pathname?"gray.200":"transparent",color:"/graph"===e.pathname?"blue.400":"black",fontSize:"lg",children:(0,r.jsx)(a.default,{href:"/graph",children:"Graph"})}),(0,r.jsx)(o.xu,{mx:4,p:2,rounded:"md",bg:"/analyze"===e.pathname?"gray.200":"transparent",color:"/analyze"===e.pathname?"blue.400":"black",fontSize:"lg",children:(0,r.jsx)(a.default,{href:"/analyze",children:"Analyze"})}),(0,r.jsx)(o.xu,{mx:4,p:2,rounded:"md",bg:"/live"===e.pathname?"gray.200":"transparent",color:"/live"===e.pathname?"blue.400":"black",fontSize:"lg",children:(0,r.jsx)(a.default,{href:"/live",children:"Live View"})})]})}},3411:function(e,n,t){"use strict";t.d(n,{z:function(){return C}});var r=t(5893),i=t(980),o=t(4096),a=t(4115),s=t(6185),l=t(9490),u=t(7294),c=t(9933),d=t(7933),f=t(3451),h=t(506),x=t(9345),p=t(3187),m=t(5837),v=t(2965),j=t(453),b=function(e){var n=e.tier,t=(0,u.useContext)(v.V).points,i=(0,u.useContext)(m.A).event,a=(0,u.useMemo)((function(){return i&&p.y[i.type]}),[i]),s=(0,u.useMemo)((function(){return null===t||void 0===t?void 0:t.filter((function(e){return e.rank===n})).sort((function(e,n){return l.ou.fromISO(n.date).diff(l.ou.fromISO(e.date)).as("minutes")}))}),[t,a,n]);return(0,r.jsxs)(o.k,{flexDir:"column",alignItems:"stretch",w:"full",children:[(0,r.jsxs)(x.r,{templateColumns:"1fr 1fr 1fr 1fr",pr:"20px",fontWeight:"bold",fontSize:"lg",children:[(0,r.jsx)(x.P,{children:"Change"}),(0,r.jsx)(x.P,{children:"Player"}),(0,r.jsx)(x.P,{children:"Points"}),(0,r.jsx)(x.P,{children:"Date/Time"})]}),(0,r.jsx)(j.t7,{itemCount:s.length,itemSize:60,width:"100%",height:600,itemData:s,children:function(e){var n=e.index,t=e.style,i=e.data[n];return(0,r.jsxs)(x.r,{bg:a&&i.difference>a.maxPerGame?"red.200":"unset",templateColumns:"1fr 1fr 1fr 1fr",style:t,children:[(0,r.jsxs)(x.P,{children:["+",-1*i.difference]}),(0,r.jsx)(x.P,{children:i.name}),(0,r.jsx)(x.P,{children:i.points}),(0,r.jsx)(x.P,{children:l.ou.fromISO(i.date).toFormat("HH:mm:ss dd/MM")})]},i.date)}})]})},g=t(4121),y=t(8017),k=t(5277),O=t(7251),w=function(e){var n=e.tier,t=(0,u.useContext)(v.V).points,i=(0,u.useContext)(m.A).event,o=(0,u.useRef)(null),a=(0,k.tH)(o),s=(0,g.Z)(a,2),l=s[0],c=s[1],d=(0,u.useMemo)((function(){return t.filter((function(e){return e.rank===n}))}),[n,t]);return(0,r.jsx)(y.xu,{ref:o,minH:"300px",w:"full",children:(0,r.jsx)(O.k,{id:"t".concat(n),startDate:i.startdate,endDate:null===i||void 0===i?void 0:i.enddate,width:l,height:c,points:d,isSmall:!0})})},S=t(4706),C=function(e){var n=e.tier,t=e.onClose,x=(0,u.useContext)(d.X).changes,p=(0,u.useContext)(f.G).lbData,m=!!n,v=null===p||void 0===p?void 0:p.find((function(e){return e.rank===n}));return v?(0,r.jsxs)(i.Modal,{isOpen:m,size:"4xl",onClose:t,children:[(0,r.jsx)(i.ModalOverlay,{}),(0,r.jsxs)(i.ModalContent,{children:[(0,r.jsxs)(i.ModalHeader,{children:["T",n," Details"]}),(0,r.jsx)(i.ModalCloseButton,{}),(0,r.jsx)(i.ModalBody,{children:(0,r.jsxs)(o.k,{flexDir:["column",null,"row"],children:[(0,r.jsxs)(o.k,{flexDir:"column",flex:1,px:2,children:[(0,r.jsxs)(a.x,{children:[(0,r.jsx)(a.x,{fontWeight:"bold",as:"span",children:"Current player"}),": ",v.name]}),(0,r.jsxs)(a.x,{children:[(0,r.jsx)(a.x,{fontWeight:"bold",as:"span",children:"Points"}),": ",v.points]}),v.rate&&(0,r.jsxs)(a.x,{children:[(0,r.jsx)(a.x,{fontWeight:"bold",as:"span",children:"Rate"}),": ",v.rate]}),(0,r.jsxs)(a.x,{children:[(0,r.jsx)(a.x,{fontWeight:"bold",as:"span",children:"Last Update"}),": +",x[n]]}),(0,r.jsxs)(a.x,{children:[(0,r.jsx)(a.x,{fontWeight:"bold",as:"span",children:"Last Updated"}),": ",l.ou.fromISO(v.date).toFormat("HH:mm:ss dd/MM/yyyy")," ","(",l.ou.now().diff(l.ou.fromISO(v.date)).toFormat("hh:mm"),")"]}),(0,r.jsx)(w,{tier:n}),(0,r.jsxs)(c.z,{all:!0,children:[(0,r.jsx)(S.P,{tier:n}),(0,r.jsx)(h.k,{})]})]}),(0,r.jsx)(o.k,{minH:"600px",flexGrow:0,children:(0,r.jsx)(b,{tier:n})})]})}),(0,r.jsx)(i.ModalFooter,{children:(0,r.jsx)(s.z,{colorScheme:"red",mr:3,onClick:t,children:"Close"})})]})]}):null}},4706:function(e,n,t){"use strict";t.d(n,{P:function(){return d}});var r=t(5893),i=t(4121),o=t(8017),a=t(7294),s=t(9933),l=t(5837),u=t(5277),c=t(7251),d=function(e){var n=e.tier,t=e.graphFlags,d=(0,a.useContext)(s.O).rate,f=(0,a.useContext)(l.A).event,h=(0,a.useRef)(null),x=(0,u.tH)(h),p=(0,i.Z)(x,2),m=p[0],v=p[1],j=(0,a.useMemo)((function(){return null===d||void 0===d?void 0:d[n]}),[d,n]);return(0,r.jsx)(o.xu,{ref:h,minH:"300px",w:"full",children:(0,r.jsx)(c.k,{id:"Rate",startDate:null===f||void 0===f?void 0:f.startdate,endDate:null===f||void 0===f?void 0:f.enddate,width:m,height:v,graphFlags:null!==t&&void 0!==t?t:{advancedZoom:!1,showTooltip:!1},points:j||(d?Object.values(d).flatMap((function(e){return e})):[]),isSmall:!0})})}},3907:function(e,n,t){"use strict";t.d(n,{K:function(){return u}});var r=t(6265),i=t(5893),o=t(4115),a=t(7294);function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var u=(0,a.memo)((function(e){var n=e.tier,t=e.children,r=(0,a.useMemo)((function(){switch(n){case 1:return{fontSize:"xl",fontWeight:"bold",color:"yellow.400"};case 2:return{fontSize:"xl",fontWeight:"bold",color:"gray.400"};case 3:return{fontSize:"xl",fontWeight:"bold",color:"red.800"};case 10:case 50:case 100:case 500:case 1e3:case 2e3:case 5e3:case 1e4:case 2e4:case 3e4:case 5e4:return{fontSize:"xl",fontWeight:"bold"};default:return{}}}),[n]);return(0,i.jsx)(o.x,l(l({},r),{},{children:t||n}))}))},3187:function(e,n,t){"use strict";t.d(n,{y:function(){return r}});var r={Medley:{maxPerGame:2700}}},7933:function(e,n,t){"use strict";t.d(n,{X:function(){return b},t:function(){return g}});var r,i=t(5893),o=t(9999),a=t(809),s=t.n(a),l=t(2447),u=t(9642),c=function(){(r=new u.Z("munimuni")).version(1).stores({leaderboardChanges:"++id, event, rank, date, points, change"})};try{c()}catch(y){console.log("fuck"),r.delete(),c()}var d=function(e){return(0,l.Z)(s().mark((function n(){var t,i=arguments;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.apply(void 0,i);case 3:return n.abrupt("return",n.sent);case 6:n.prev=6,n.t0=n.catch(0),t=n.t0,n.t1=t.name,n.next="OpenFailedError"===n.t1?12:17;break;case 12:return r.delete(),c(),n.next=16,e.apply(void 0,i);case 16:return n.abrupt("break",18);case 17:throw t;case 18:case"end":return n.stop()}}),n,null,[[0,6]])})))},f=d(function(){var e=(0,l.Z)(s().mark((function e(n){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.table("leaderboardChanges").where("event").equals(n).toArray();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),h=d(function(){var e=(0,l.Z)(s().mark((function e(n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.table("leaderboardChanges").bulkAdd(n));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),x=t(4693),p=t(9490),m=t(7294),v=t(5837),j=t(3451),b=(0,m.createContext)({}),g=function(e){var n=e.children,t=(0,m.useContext)(j.G).lbData,r=(0,m.useContext)(v.A).event,a=(0,m.useState)({}),u=a[0],c=a[1],d=(0,m.useState)([]),g=d[0],y=d[1],k=(0,m.useRef)(),O=(0,m.useCallback)((0,l.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return",Promise.resolve([]));case 2:return e.abrupt("return",f(r.eventid));case 3:case"end":return e.stop()}}),e)}))),[r]);return(0,x.b)(O,y),(0,m.useEffect)((function(){if(r){if(k.current){var e=[],n=t.map((function(n){var t,i=k.current.find((function(e){return e.rank===n.rank}));if(!i)return[n.rank,n.points];var o=n.points-i.points,a=o>0?o:p.ou.fromISO(n.date).diffNow().as("minutes")>-4&&null!==(t=u[n.rank])&&void 0!==t?t:0;return o>0&&e.push({event:r.eventid,rank:n.rank,change:a,date:p.ou.fromISO(n.date).toSeconds(),points:n.points}),[n.rank,a]}));y((function(n){return[].concat((0,o.Z)(n),e)})),h(e),c(Object.fromEntries(n))}k.current=t}}),[t,r]),(0,i.jsx)(b.Provider,{value:{changes:u,pastUpdates:g},children:n})}},4453:function(){}}]);