(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[733],{8842:function(t,e,r){"use strict";r.d(e,{p:function(){return s},I:function(){return f}});var n=r(809),u=r.n(n),c=r(2447),a=r(9669),o=r.n(a),i=r(7456),s=function(){var t=(0,c.Z)(u().mark((function t(){var e;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o().get((0,i._)("http://www.projectdivar.com/ev"));case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),f=function(){var t=(0,c.Z)(u().mark((function t(){var e;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o().get((0,i._)("http://www.projectdivar.com/ev?all=true"));case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},7456:function(t,e,r){"use strict";r.d(e,{_:function(){return n}});var n=function(t){return t.match("projectdivar")?"https://hambot.ham-san.net/d4dj/sig?url="+encodeURIComponent(t):t.match("d4-dj")?"https://hambot.ham-san.net/d4dj/d4db?url="+encodeURIComponent(t):t}},6529:function(t,e,r){"use strict";r.d(e,{L:function(){return a}});var n=r(5893),u=r(4096),c=r(980),a=(r(7294),function(){return(0,n.jsx)(u.k,{w:"full",alignItems:"center",justifyContent:"center",h:"full",children:(0,n.jsx)(c.Spinner,{size:"xl"})})})},2974:function(t,e,r){"use strict";r.d(e,{M:function(){return s}});var n=r(5893),u=r(4096),c=r(4115),a=r(9490),o=r(7294),i=r(1748),s=function(){var t=(0,o.useContext)(i.A).event;return t?(0,n.jsxs)(u.k,{flexDirection:"column",py:2,children:[(0,n.jsx)(c.x,{fontWeight:"bold",fontSize:"3xl",textAlign:["center","start"],children:t.name}),a.ou.fromISO(t.enddate).diffNow().as("second")>0&&(0,n.jsx)(f,{startTime:t.startdate,rankEndTime:t.enddate,resultsTime:t.enddate})]}):null},f=function(t){var e=t.startTime,r=t.rankEndTime,i=t.resultsTime,s=(0,o.useState)("--:--"),f=s[0],l=s[1],d=(0,o.useState)(""),p=d[0],v=d[1],m=(0,o.useState)("-"),h=m[0],x=m[1],y=(0,o.useMemo)((function(){return Math.round(a.ou.fromISO(r).diff(a.ou.fromISO(e)).as("hours"))}),[e,r]);return(0,o.useEffect)((function(){var t=!1,n=function(){var n=a.ou.fromISO(r).diffNow(),u=a.ou.fromISO(i).diffNow(),c=Math.floor(a.ou.now().diff(a.ou.fromISO(e)).as("hours"));t||(n.as("hours")>0?(v("Time until end"),l(n.toFormat("hh:mm"))):u.as("hours")>0&&(v("Time until results"),l(u.toFormat("hh:mm"))),x("".concat(c>y?y:c," / ").concat(y," ").concat(c>y?"100":Math.round(c/y*100),"%")))};n();setInterval(n,3e4)}),[y]),(0,n.jsxs)(u.k,{flexDirection:"column",justifyContent:"center",children:[(0,n.jsxs)(c.x,{textAlign:"center",children:["Progress: ",h]}),(0,n.jsx)(c.x,{textAlign:"center",children:p}),(0,n.jsx)(c.x,{fontSize:"lg",fontWeight:"bold",textAlign:"center",children:f})]})}},7251:function(t,e,r){"use strict";r.d(e,{k:function(){return m}});var n=r(5893),u=r(4121),c=r(8347),a=r(4013),o=r(8017),i=r(2594),s=r(7408),f=r(9490),l=r(7294),d=r(4279),p=r(6529),v=500,m=function(t){var e=t.id,r=t.points,m=t.startDate,h=t.endDate,x=t.isLive,y=void 0!==x&&x,g=t.width,w=t.height,k=void 0===w?600:w,S=t.graphFlags,b=void 0===S?{showTooltip:!1,advancedZoom:!1}:S,j=(0,c.Z)(t,["id","points","startDate","endDate","isLive","width","height","graphFlags"]),I=b.showTooltip,R=b.advancedZoom,D=(0,l.useRef)(null),A=(0,l.useRef)(),C=(0,l.useRef)(),O=(0,l.useRef)(),Z=(0,l.useRef)(),E=(0,l.useRef)(),_=(0,l.useRef)(),T=(0,l.useRef)(),L=(0,l.useRef)(),M=(0,l.useRef)(),F=(0,l.useRef)(),P=(0,l.useRef)(),J=(0,l.useRef)(),N=(0,l.useRef)(),z=(0,l.useRef)(s.YFb((function(t){return(0,s.ji_)(t.date)})).left),V=(0,l.useRef)(),G=(0,l.useRef)(),X=(0,l.useRef)(),U=(0,l.useRef)(),$=(0,a.G)(),K=j.isSmall||"base"===$||"sm"===$,Y=(0,l.useMemo)((function(){return{top:20,right:20,bottom:30,left:K?45:60}}),[K]),B=(0,l.useMemo)((function(){var t=g-Y.left-Y.right;return t<0?0:t}),[Y,g]),H=(0,l.useMemo)((function(){var t=k-Y.top-Y.bottom;return t<0?0:t}),[Y,k]);(0,l.useEffect)((function(){return F.current=s.sPX().scaleExtent([1,500]).extent([[0,0],[B,H]]).translateExtent([[0,-1/0],[B,1/0]]).on("zoom",et),A.current=s.Ys(D.current),C.current=A.current.append("svg").attr("width",B+Y.left+Y.right).attr("height",H+Y.top+Y.bottom).append("g").attr("transform","translate("+Y.left+","+Y.top+")"),O.current=s.Xf().range([0,B]),E.current=s.BYU().range([H,0]),P.current=O.current,L.current=C.current.append("clipPath").attr("id","clip-"+e).append("rect").attr("width",B).attr("height",H),C.current.append("g").attr("class","xAxis").attr("transform","translate(0,"+H+")"),C.current.append("g").attr("class","yAxis"),C.current.append("g").attr("class","xGrid").attr("transform","translate(0,"+H+")"),C.current.append("g").attr("class","yGrid"),Z.current=s.LLu(O.current),_.current=s.y4O(E.current),T.current=s.PKp().range(Array(30).fill(null).map((function(t,e,r){return(0,s.ICD)(3*e/r.length)}))).domain(i.K),M.current=C.current.append("g").attr("clip-path","url(#clip-".concat(e,")")).attr("id","lines"),I&&(V.current=C.current.append("g").attr("class","tooltip").style("padding","2px").style("background-color","red"),G.current=V.current.append("line").style("stroke-width",1).style("stroke","grey"),X.current=A.current.append("div").style("display",null).style("position","absolute").style("pointer-events","none").style("padding","2px").style("background-color","lightgray").style("opacity",.8).style("z-index",3),X.current.append("p").style("font-size","0.9em"),X.current.append("ul").attr("class","scoreboard").style("font-size","0.75em").style("list-style-type","none")),function(){A.current.selectAll("*").remove()}}),[B,H,y,I,R]);var W=(0,l.useCallback)((function(t){if(0!==r.length){var e=s.cx$(t),n=P.current.invert(e[0]),c=z.current(r,n,1);if(!r[c])return V.current.style("opacity",0),void X.current.style("display","none");V.current.style("opacity",1),X.current.style("display","block");var a=P.current((0,s.ji_)(r[c].date)),o=s.Xxj(r,(function(t){return t.rank})).sort((function(t,e){return t[0]-e[0]})).map((function(t){var e=(0,u.Z)(t,2),r=e[0],c=e[1];return[r,c[z.current(c,n,1)]]})).filter((function(t){return!!t[1]}));G.current.attr("y1",0).attr("y2",H).attr("x1",a).attr("x2",a);var i=s.cx$(t,A.current);X.current.selectAll("p").text(f.ou.fromJSDate(n).toFormat("HH:mm:ss DD")),X.current.style("left",i[0]+10+"px"),X.current.style("top",i[1]+"px");var l=X.current.select(".scoreboard").selectAll("li").data(o);l.enter().append("li"),l.exit().remove(),l.text((function(t){return"T".concat((0,d.a)(t[0]),": ").concat(t[1].points)}));var p=V.current.selectAll("circle").data(o,(function(t){return t[0]}));p.enter().append("circle").attr("class","point").attr("tier",(function(t){return t[0]})).attr("r",4),p.exit().remove(),p.attr("fill",(function(t){return T.current(t[0])})).attr("cx",a).attr("cy",(function(t){return E.current(t[1].points)}))}}),[H,r]);function Q(){V.current.style("opacity",0),X.current.style("display","none")}(0,l.useEffect)((function(){return U.current=C.current.append("rect").style("fill","none").style("pointer-events","all").attr("width",B).attr("height",H),I&&U.current.on("mousemove",(function(t){W(t)})).on("mouseout",Q),y||U.current.call(F.current),function(){U.current.remove()}}),[B,H,W,I,R]);var q=(0,l.useCallback)((function(){if(P.current=N.current.rescaleX(O.current),Z.current=s.LLu(P.current),R){var t=P.current.domain(),e=r.filter((function(e){return f.ou.fromISO(e.date).toJSDate()>=t[0]&&f.ou.fromISO(e.date).toJSDate()<=t[1]})),n=[s.VV$(e,(function(t){return t.points})),s.Fp7(e,(function(t){return t.points}))];J.current=E.current.domain(n),_.current=s.y4O(J.current)}}),[r,R]),tt=(0,l.useCallback)((function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];C.current.select(".xGrid").attr("color","lightgray").transition().duration(t?v:0).call(s.LLu(P.current).tickSize(-H).tickFormat((function(){return""}))),C.current.select(".yGrid").attr("color","lightgray").transition().duration(t?v:0).call(s.y4O(J.current).tickSize(-B).tickFormat((function(){return""}))),C.current.select(".xAxis").transition().duration(t?v:0).call(Z.current),C.current.select(".yAxis").transition().duration(t?v:0).call(K?_.current.tickFormat((function(t){return(0,d.a)(t)})):_.current)}),[H,B,K]),et=(0,l.useCallback)((function(t){var e,r;N.current=t.transform,null===(e=V.current)||void 0===e||e.style("opacity",0),null===(r=X.current)||void 0===r||r.style("display","none"),q(),tt(),M.current.selectAll("path.line").attr("d",(function(t){return s.jvg().x((function(t){return P.current((0,s.ji_)(t.date))})).y((function(t){return J.current(t.points)}))(t[1])}))}),[q,tt]);return(0,l.useEffect)((function(){var t=f.ou.now().plus({minutes:30}),e=f.ou.fromISO(m),n=f.ou.fromISO(h),u=y?m&&f.ou.now().minus({hour:3}).diff(e).as("second")<0?e.toJSDate():f.ou.now().minus({hour:3}).toJSDate():m?e.toJSDate():s.VV$(r,(function(t){return(0,s.ji_)(t.date)})),c=f.ou.now().plus({minutes:30}).diff(n).as("seconds")>0?n:t,a=y&&n.diffNow().as("minute")<0?[e,n]:[u,c];O.current.domain(a);var o=y&&n.diffNow().as("minute")<0?[0,s.Fp7(r,(function(t){return t.points}))]:[y?s.VV$(r.filter((function(t){return f.ou.fromISO(t.date).diff(f.ou.fromJSDate(u)).as("seconds")>0})),(function(t){return t.points})):0,s.Fp7(r,(function(t){return t.points}))];E.current.domain(o).nice(),N.current?q():(P.current=O.current,J.current=E.current),R||(P.current=O.current,J.current=E.current),Z.current=s.LLu(P.current),_.current=s.y4O(J.current);var i=s.Xxj(r,(function(t){return t.rank})),l=M.current.selectAll("path").data(i,(function(t){return t[0]}));l.enter().append("path").attr("class","line").attr("tier",(function(t){return t[0]})).attr("fill","none").attr("stroke",(function(t){return T.current(t[0])})).attr("stroke-width",2),l.exit().remove(),M.current.selectAll("path.line").transition().duration(v).attr("d",(function(t){return s.jvg().x((function(t){return P.current((0,s.ji_)(t.date))})).y((function(t){return J.current(t.points)}))(t[1])})),tt(!0)}),[r,B,H,K,I,R]),0===B&&0===H?(0,n.jsx)(p.L,{}):(0,n.jsx)(o.xu,{ref:D})}},2594:function(t,e,r){"use strict";r.d(e,{X:function(){return n},K:function(){return u}});var n=[1,2,3,10,50,100,500,1e3,2e3,5e3,1e4,2e4,3e4,5e4],u=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,50,100,500,1e3,2e3,5e3,1e4,2e4,3e4,5e4]},1748:function(t,e,r){"use strict";r.d(e,{A:function(){return o},d:function(){return i}});var n=r(5893),u=r(8842),c=r(4693),a=r(7294),o=(0,a.createContext)({}),i=function(t){var e=t.event,r=t.children,i=(0,a.useState)(e),s=i[0],f=i[1];return e||(0,c.b)(u.p,f),(0,n.jsx)(o.Provider,{value:{event:s||e},children:r})}},2965:function(t,e,r){"use strict";r.d(e,{V:function(){return x},U:function(){return y}});var n=r(5893),u=r(9999),c=r(809),a=r.n(c),o=r(2447),i=r(9669),s=r.n(i),f=r(7456),l=function(){var t=(0,o.Z)(a().mark((function t(e){var r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s().get((0,f._)("http://www.projectdivar.com/eventdata/t20?all=true&event=".concat(e)));case 2:return r=t.sent,t.abrupt("return",r.data.sort((function(t,e){return t.id-e.id})));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),d=r(4693),p=r(9490),v=r(7294),m=r(1748),h=r(3451),x=(0,v.createContext)({}),y=function(t){var e=t.children,r=(0,v.useContext)(h.G).lbData,c=(0,v.useContext)(m.A).event,a=(0,v.useState)([]),o=a[0],i=a[1],s=(0,v.useRef)({}),f=(0,v.useCallback)((function(){return c?l(c.eventid):Promise.resolve([])}),[c]);return(0,d.b)(f,i),(0,v.useEffect)((function(){if(r){var t=r.filter((function(t){return!(s.current[t.rank]&&p.ou.fromISO(t.date).diff(s.current[t.rank]).as("seconds")<=0)&&(s.current[t.rank]=p.ou.fromISO(t.date),!0)}));t.length>0&&i((function(e){return[].concat((0,u.Z)(e),(0,u.Z)(t))}))}}),[r]),(0,n.jsx)(x.Provider,{value:{points:o},children:e})}},9538:function(t,e,r){"use strict";r.d(e,{B:function(){return s},Q:function(){return f}});var n=r(5893),u=r(4121),c=r(3376),a=r(5492),o=r(7294),i=r(2965),s=(0,o.createContext)({}),f=function(t){var e=t.points,r=t.children,f=(0,o.useContext)(i.V).points,l=(0,a._)("displayTier",null),d=(0,u.Z)(l,2),p=d[0],v=d[1],m=(0,o.useState)([]),h=m[0],x=m[1],y=(0,o.useMemo)((function(){return e||f}),[e,f]);(0,o.useEffect)((function(){0===h.length&&x(Array.from(new Set(y.map((function(t){return t.rank})))))}),[y]);var g=(0,o.useMemo)((function(){return p?y.filter((function(t){return p.includes(t.rank)})).sort((function(t,e){return(0,c.Z)(t.date)>(0,c.Z)(e.date)?0:1})):y}),[y,p]);return(0,n.jsx)(s.Provider,{value:{points:g,displayTier:p,setDisplayTier:v,allTiers:h},children:r})}},3451:function(t,e,r){"use strict";r.d(e,{G:function(){return v},K:function(){return m}});var n=r(5893),u=r(809),c=r.n(u),a=r(2447),o=r(9999),i=r(9669),s=r.n(i),f=r(7456),l=function(){var t=(0,a.Z)(c().mark((function t(){var e;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([s().get((0,f._)("http://www.projectdivar.com/eventdata/t20")),s().get((0,f._)("http://www.projectdivar.com/eventdata/t50"))]);case 2:return e=t.sent,t.abrupt("return",e.map((function(t){return t.data})).reduce((function(t,e){return[].concat((0,o.Z)(t),(0,o.Z)(e))})).sort((function(t,e){return t.rank-e.rank})));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),d=r(7294),p=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;return new Promise((function(e){return setTimeout(e,t)}))},v=(0,d.createContext)({}),m=function(t){var e=t.lbData,r=t.children,u=(0,d.useState)(),o=u[0],i=u[1],s=(0,d.useState)(),f=s[0],m=s[1],h=(0,d.useState)(2e4)[0];return(0,d.useEffect)((function(){if(!e){var t=!1;(function(){var e=(0,a.Z)(c().mark((function e(){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=15;break}return e.prev=1,e.next=4,l();case 4:if(r=e.sent,!t){e.next=7;break}return e.abrupt("break",15);case 7:i(r),m(new Date);case 9:return e.prev=9,e.next=12,p(h);case 12:return e.finish(9);case 13:e.next=0;break;case 15:case"end":return e.stop()}}),e,null,[[1,,9,13]])})));return function(){return e.apply(this,arguments)}})()()}}),[h]),(0,n.jsx)(v.Provider,{value:{lbData:e||o,lastUpdated:f},children:r})}},5492:function(t,e,r){"use strict";r.d(e,{_:function(){return o}});var n=r(7294),u=r(4047),c=r(2700),a=function(){function t(e){(0,u.Z)(this,t),this.key=e}return(0,c.Z)(t,[{key:"clear",value:function(){localStorage.removeItem(this.key)}},{key:"value",get:function(){try{var t=localStorage.getItem(this.key);return null!==t?JSON.parse(t):null}catch(e){return null}},set:function(t){if(null!==t){var e=JSON.stringify(t);localStorage.setItem(this.key,e)}else localStorage.removeItem(this.key)}}]),t}(),o=function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,u=new a(t),c=(0,n.useState)(u.value||r),o=c[0],i=c[1],s=function(t){var r="function"===typeof t?t.call(e,o):t;u.value=r,i(r)},f=function(t){return function(e){e.key===t&&i(JSON.parse(e.newValue||""))}};return(0,n.useEffect)((function(){return window.addEventListener("storage",f(t)),function(){window.removeEventListener("storage",f(t))}}),[t]),[o,s]}},4693:function(t,e,r){"use strict";r.d(e,{b:function(){return o}});var n=r(809),u=r.n(n),c=r(2447),a=r(7294),o=function(t,e){(0,a.useEffect)((function(){var r=!1;return function(){var n=(0,c.Z)(u().mark((function n(){var c;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,"function"===typeof t?t():t;case 2:if(c=n.sent,!r){n.next=5;break}return n.abrupt("return");case 5:e(c);case 6:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()(),function(){r=!0}}),[t,e])}},4279:function(t,e,r){"use strict";r.d(e,{a:function(){return n}});var n=function(t){return t<1e3?"".concat(t):t<1e6?"".concat(Math.round(t/1e3*100)/100,"k"):"".concat(Math.round(t/1e6*100)/100,"M")}}}]);