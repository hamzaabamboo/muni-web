(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[12,179],{3346:function(e,r,n){"use strict";n.d(r,{iA:function(){return u},hr:function(){return d},p3:function(){return f},Th:function(){return h},Tr:function(){return x},Td:function(){return p}});var t=n(1180),a=n(5284),i=n(4686),o=n(7294);function s(){return(s=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e}).apply(this,arguments)}function l(e,r){if(null==e)return{};var n,t,a={},i=Object.keys(e);for(t=0;t<i.length;t++)n=i[t],r.indexOf(n)>=0||(a[n]=e[n]);return a}var u=(0,t.forwardRef)(((e,r)=>{var n=(0,t.useMultiStyleConfig)("Table",e),u=(0,a.Lr)(e),{className:c}=u,d=l(u,["className"]);return o.createElement(t.StylesProvider,{value:n},o.createElement(t.chakra.table,s({role:"table",ref:r,__css:n.table,className:(0,i.cx)("chakra-table",c)},d)))}));i.__DEV__&&(u.displayName="Table");var c=(0,t.forwardRef)(((e,r)=>{var{placement:n="bottom"}=e,a=l(e,["placement"]),i=(0,t.useStyles)();return o.createElement(t.chakra.caption,s({},a,{ref:r,__css:s({},i.caption,{captionSide:n})}))}));i.__DEV__&&(c.displayName="TableCaption");var d=(0,t.forwardRef)(((e,r)=>{var n=(0,t.useStyles)();return o.createElement(t.chakra.thead,s({},e,{ref:r,__css:n.thead}))})),f=(0,t.forwardRef)(((e,r)=>{var n=(0,t.useStyles)();return o.createElement(t.chakra.tbody,s({},e,{ref:r,__css:n.tbody}))})),h=(0,t.forwardRef)(((e,r)=>{var{isNumeric:n}=e,a=l(e,["isNumeric"]),i=(0,t.useStyles)();return o.createElement(t.chakra.th,s({},a,{ref:r,__css:i.th,"data-is-numeric":n}))})),x=(0,t.forwardRef)(((e,r)=>{var n=(0,t.useStyles)();return o.createElement(t.chakra.tr,s({role:"row"},e,{ref:r,__css:n.tr}))})),p=(0,t.forwardRef)(((e,r)=>{var{isNumeric:n}=e,a=l(e,["isNumeric"]),i=(0,t.useStyles)();return o.createElement(t.chakra.td,s({role:"gridcell"},a,{ref:r,__css:i.td,"data-is-numeric":n}))}))},506:function(e,r,n){"use strict";n.d(r,{k:function(){return c}});var t=n(5893),a=n(4096),i=n(4115),o=n(980),s=n(7294),l=n(9933),u=[{label:"1 Minute (Laggy tho)",value:6e4},{label:"10 Minutes",value:6e5},{label:"30 minutes",value:18e5},{label:"1 Hour",value:36e5},{label:"1 Day",value:864e5}],c=function(){var e=(0,s.useContext)(l.O),r=e.interval,n=e.setInterval;return(0,t.jsxs)(a.k,{flexDir:"column",children:[(0,t.jsx)(i.x,{my:1,fontWeight:"bold",as:"span",textAlign:"start",children:"Analysis Settings"}),(0,t.jsxs)(a.k,{flexDir:"row",alignItems:"center",children:[(0,t.jsx)(i.x,{mr:2,children:"Interval"}),(0,t.jsx)(o.Select,{value:r,onChange:function(e){return n(Number(e.target.value))},children:u.map((function(e){return(0,t.jsx)("option",{value:e.value,children:e.label},e.value)}))})]})]})}},4816:function(e,r,n){"use strict";n.d(r,{s:function(){return w}});var t=n(6265),a=n(5893),i=n(4013),o=n(4096),s=n(4115),l=n(3346),u=n(2594),c=n(9695),d=n.n(c),f=n(9490),h=n(7294),x=n(5837),p=n(7933),v=n(3451),m=n(4279),j=n(3187),b=n(6529),g=n(3907);function y(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function k(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?y(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var w=function(e){var r=e.isSmall,n=(e.interval,e.isPlaying),t=void 0===n||n,c=e.onTierSelected,y=(0,h.useContext)(v.G),w=y.lbData,O=y.lastUpdated,S=(0,h.useContext)(p.X).changes,C=(0,h.useContext)(x.A).event,T=(0,i.G)(),P=(0,h.useMemo)((function(){var e=f.ou.fromJSDate(O).diffNow().as("milliseconds");return 0===e?"Just now":d()(e,{round:!0,largest:2})+" ago"}),[O]);if(!w)return(0,a.jsx)(b.L,{});var D=r||"base"===T||"sm"===T,N=D&&{display:"none"};return(0,a.jsxs)(o.k,{flexDir:"column",children:[(0,a.jsxs)(o.k,{flexDir:"column",children:[(0,a.jsx)(s.x,{fontSize:"2xl",fontWeight:"bold",children:"Muniboard"}),(0,a.jsxs)(s.x,{fontSize:"sm",as:"span",fontWeight:"normal",children:["Last Updated: ",P]})]}),(0,a.jsxs)(l.iA,{size:"sm",children:[(0,a.jsx)(l.hr,{children:(0,a.jsxs)(l.Tr,{children:[(0,a.jsx)(l.Th,{textAlign:"center",children:"Rank"}),(0,a.jsx)(l.Th,{children:"Name"}),(0,a.jsx)(l.Th,{children:"Points"}),(0,a.jsx)(l.Th,k(k({textAlign:"end"},N),{},{children:"Gap"})),(0,a.jsx)(l.Th,k(k({textAlign:"end"},N),{},{children:"Rate"})),(0,a.jsx)(l.Th,k(k({textAlign:"end",whiteSpace:"break-spaces"},N),{},{children:"Time to boat"})),(0,a.jsx)(l.Th,{children:"Last Updated"})]})}),(0,a.jsx)(l.p3,{children:w.map((function(e,r,n){var i,o,d,h,x,p,v;return(0,a.jsxs)(l.Tr,k(k({},t?function(e,r,n){var t,a;return null===(t=r>(null===(a=j.y[n])||void 0===a?void 0:a.maxPerGame))||void 0===t||t?{bg:"red.100"}:f.ou.fromISO(e.date).diffNow().as("minutes")<-10?{}:{bg:"gray.100"}}(e,null===S||void 0===S?void 0:S[e.rank],null===C||void 0===C?void 0:C.type):{}),{},{borderBottom:u.X.includes(e.rank)&&"2px solid",borderBottomColor:"gray.400",onClick:function(){return null===c||void 0===c?void 0:c(e.rank)},children:[(0,a.jsx)(l.Td,{textAlign:"center",children:(0,a.jsx)(g.K,{tier:e.rank,children:D?(0,m.a)(e.rank):e.rank})}),(0,a.jsxs)(l.Td,{children:[(0,a.jsx)(s.x,{fontSize:D?"sm":"md",overflow:D?"ellipsis":"unset",children:e.name}),(0,a.jsx)(s.x,k(k({fontSize:"xs"},N),{},{children:e.description}))]}),(0,a.jsxs)(l.Td,{children:[(0,a.jsx)(s.x,{fontSize:D?"sm":"md",children:e.points}),(null===S||void 0===S?void 0:S[e.rank])>0&&(0,a.jsxs)(s.x,{fontSize:"xs",children:["(+",null!==(i=S[e.rank])&&void 0!==i?i:0,")"]})]}),(0,a.jsx)(l.Td,k(k({isNumeric:!0},N),{},{children:r+1<n.length?e.points-(null===(o=n[r+1])||void 0===o?void 0:o.points):0})),(0,a.jsx)(l.Td,k(k({isNumeric:!0},N),{},{children:e.rate})),(0,a.jsx)(l.Td,k(k({isNumeric:!0},N),{},{children:r+1<n.length&&!isNaN(Number(null===(d=n[r+1])||void 0===d?void 0:d.rate))?(v=(e.points-(null===(h=n[r+1])||void 0===h?void 0:h.points))/(Number(null===(x=n[r+1])||void 0===x?void 0:x.rate)-Number("???"===e.rate?0:e.rate))*60*60*1e3,isNaN(v)||v<0?"--:--":f.nL.fromMillis(v).toFormat("hh:mm")):"-"})),(0,a.jsx)(l.Td,{children:(p=e.date,f.ou.fromISO(p).diffNow().as("minute")>-3?"Just now":f.ou.now().diff(f.ou.fromISO(p)).toFormat("hh:mm"))})]}),e.rank)}))})]})]})}},8024:function(e,r,n){"use strict";n.d(r,{W:function(){return l}});var t=n(5893),a=n(4096),i=n(8017),o=n(1664),s=n(1163),l=function(){var e=(0,s.useRouter)();return(0,t.jsxs)(a.k,{py:2,justifyContent:["center","start"],children:[(0,t.jsx)(i.xu,{mx:4,p:2,rounded:"md",bg:"/"===e.pathname?"gray.200":"transparent",color:"/"===e.pathname?"blue.400":"black",fontSize:"lg",children:(0,t.jsx)(o.default,{href:"/",children:"Muniboard"})}),(0,t.jsx)(i.xu,{mx:4,p:2,rounded:"md",bg:"/graph"===e.pathname?"gray.200":"transparent",color:"/graph"===e.pathname?"blue.400":"black",fontSize:"lg",children:(0,t.jsx)(o.default,{href:"/graph",children:"Graph"})}),(0,t.jsx)(i.xu,{mx:4,p:2,rounded:"md",bg:"/analyze"===e.pathname?"gray.200":"transparent",color:"/analyze"===e.pathname?"blue.400":"black",fontSize:"lg",children:(0,t.jsx)(o.default,{href:"/analyze",children:"Analyze"})}),(0,t.jsx)(i.xu,{mx:4,p:2,rounded:"md",bg:"/live"===e.pathname?"gray.200":"transparent",color:"/live"===e.pathname?"blue.400":"black",fontSize:"lg",children:(0,t.jsx)(o.default,{href:"/live",children:"Live View"})})]})}},3411:function(e,r,n){"use strict";n.d(r,{z:function(){return S}});var t=n(5893),a=n(980),i=n(4096),o=n(4115),s=n(6185),l=n(9490),u=n(7294),c=n(9933),d=n(7933),f=n(3451),h=n(506),x=n(8017),p=n(3346),v=n(3187),m=n(5837),j=function(e){var r=e.tier,n=(0,u.useContext)(d.X).pastUpdates,a=(0,u.useContext)(m.A).event,i=(0,u.useMemo)((function(){return a&&v.y[a.type]}),[a]),s=(0,u.useMemo)((function(){return null===n||void 0===n?void 0:n.filter((function(e){return e.rank===r})).sort((function(e,r){return l.ou.fromSeconds(r.date).diff(l.ou.fromSeconds(e.date)).as("minutes")}))}),[n,i,r]);return(0,t.jsx)(x.xu,{h:"full",w:"full",position:"relative",maxH:"600px",overflowX:"auto",children:(0,t.jsxs)(p.iA,{size:"sm",variant:"simple",children:[(0,t.jsx)(p.hr,{children:(0,t.jsxs)(p.Tr,{children:[(0,t.jsx)(p.Th,{children:"Change"}),(0,t.jsx)(p.Th,{children:"Points"}),(0,t.jsx)(p.Th,{children:"Date/Time"})]})}),(0,t.jsx)(p.p3,{children:(null===s||void 0===s?void 0:s.length)>0?s.map((function(e){return(0,t.jsxs)(p.Tr,{bg:i&&e.change>i.maxPerGame?"red.200":"unset",children:[(0,t.jsxs)(p.Td,{children:["+",e.change]}),(0,t.jsx)(p.Td,{children:e.points}),(0,t.jsx)(p.Td,{children:l.ou.fromSeconds(e.date).toFormat("HH:mm:ss dd/MM/yyyy")})]},e.date)})):(0,t.jsx)(p.Tr,{children:(0,t.jsx)(p.Td,{colSpan:3,children:(0,t.jsx)(o.x,{textAlign:"center",children:"No data yet, Collecting Data..."})})})})]})})},b=n(4121),g=n(2965),y=n(5277),k=n(7251),w=function(e){var r=e.tier,n=(0,u.useContext)(g.V).points,a=(0,u.useContext)(m.A).event,i=(0,u.useRef)(null),o=(0,y.tH)(i),s=(0,b.Z)(o,2),l=s[0],c=s[1],d=(0,u.useMemo)((function(){return n.filter((function(e){return e.rank===r}))}),[r,n]);return(0,t.jsx)(x.xu,{ref:i,minH:"300px",w:"full",children:(0,t.jsx)(k.k,{id:"t".concat(r),startDate:a.startdate,endDate:null===a||void 0===a?void 0:a.enddate,width:l,height:c,points:d,isSmall:!0})})},O=n(4706),S=function(e){var r=e.tier,n=e.onClose,x=(0,u.useContext)(d.X).changes,p=(0,u.useContext)(f.G).lbData,v=!!r,m=null===p||void 0===p?void 0:p.find((function(e){return e.rank===r}));return m?(0,t.jsxs)(a.Modal,{isOpen:v,size:"4xl",onClose:n,children:[(0,t.jsx)(a.ModalOverlay,{}),(0,t.jsxs)(a.ModalContent,{children:[(0,t.jsxs)(a.ModalHeader,{children:["T",r," Details"]}),(0,t.jsx)(a.ModalCloseButton,{}),(0,t.jsx)(a.ModalBody,{children:(0,t.jsxs)(i.k,{flexDir:["column",null,"row"],children:[(0,t.jsxs)(i.k,{flexDir:"column",flex:1,px:2,children:[(0,t.jsxs)(o.x,{children:[(0,t.jsx)(o.x,{fontWeight:"bold",as:"span",children:"Current player"}),": ",m.name]}),(0,t.jsxs)(o.x,{children:[(0,t.jsx)(o.x,{fontWeight:"bold",as:"span",children:"Points"}),": ",m.points]}),m.rate&&(0,t.jsxs)(o.x,{children:[(0,t.jsx)(o.x,{fontWeight:"bold",as:"span",children:"Rate"}),": ",m.rate]}),(0,t.jsxs)(o.x,{children:[(0,t.jsx)(o.x,{fontWeight:"bold",as:"span",children:"Last Update"}),": +",x[r]]}),(0,t.jsxs)(o.x,{children:[(0,t.jsx)(o.x,{fontWeight:"bold",as:"span",children:"Last Updated"}),": ",l.ou.fromISO(m.date).toFormat("HH:mm:ss dd/MM/yyyy")," ","(",l.ou.now().diff(l.ou.fromISO(m.date)).toFormat("hh:mm"),")"]}),(0,t.jsx)(w,{tier:r}),(0,t.jsxs)(c.z,{all:!0,children:[(0,t.jsx)(O.P,{tier:r}),(0,t.jsx)(h.k,{})]})]}),(0,t.jsx)(i.k,{minH:"600px",children:(0,t.jsx)(j,{tier:r})})]})}),(0,t.jsx)(a.ModalFooter,{children:(0,t.jsx)(s.z,{colorScheme:"red",mr:3,onClick:n,children:"Close"})})]})]}):null}},4706:function(e,r,n){"use strict";n.d(r,{P:function(){return d}});var t=n(5893),a=n(4121),i=n(8017),o=n(7294),s=n(9933),l=n(5837),u=n(5277),c=n(7251),d=function(e){var r=e.tier,n=e.graphFlags,d=(0,o.useContext)(s.O).rate,f=(0,o.useContext)(l.A).event,h=(0,o.useRef)(null),x=(0,u.tH)(h),p=(0,a.Z)(x,2),v=p[0],m=p[1],j=(0,o.useMemo)((function(){return null===d||void 0===d?void 0:d[r]}),[d,r]);return(0,t.jsx)(i.xu,{ref:h,minH:"600px",w:"full",children:(0,t.jsx)(c.k,{id:"Rate",startDate:null===f||void 0===f?void 0:f.startdate,endDate:null===f||void 0===f?void 0:f.enddate,width:v,height:m,graphFlags:null!==n&&void 0!==n?n:{advancedZoom:!1,showTooltip:!1},points:j||(d?Object.values(d).flatMap((function(e){return e})):[]),isSmall:!0})})}},3907:function(e,r,n){"use strict";n.d(r,{K:function(){return u}});var t=n(6265),a=n(5893),i=n(4115),o=n(7294);function s(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function l(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?s(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var u=(0,o.memo)((function(e){var r=e.tier,n=e.children,t=(0,o.useMemo)((function(){switch(r){case 1:return{fontSize:"xl",fontWeight:"bold",color:"yellow.400"};case 2:return{fontSize:"xl",fontWeight:"bold",color:"gray.400"};case 3:return{fontSize:"xl",fontWeight:"bold",color:"red.800"};case 10:case 50:case 100:case 500:case 1e3:case 2e3:case 5e3:case 1e4:case 2e4:case 3e4:case 5e4:return{fontSize:"xl",fontWeight:"bold"};default:return{}}}),[r]);return(0,a.jsx)(i.x,l(l({},t),{},{children:n||r}))}))},3187:function(e,r,n){"use strict";n.d(r,{y:function(){return t}});var t={Medley:{maxPerGame:2700}}},9933:function(e,r,n){"use strict";n.d(r,{O:function(){return u},z:function(){return c}});var t=n(5893),a=n(4121),i=n(7294),o=n(5277),s=n(2965),l=n(9538),u=(0,i.createContext)({}),c=function(e){var r=e.children,c=e.all,d=(0,i.useContext)(s.V).points,f=(0,i.useContext)(l.B).points,h=(0,i.useRef)(),x=(0,i.useState)(),p=x[0],v=x[1],m=(0,o._)("groupInterval",36e5),j=(0,a.Z)(m,2),b=j[0],g=j[1],y=(0,i.useMemo)((function(){return c?d:f||d}),[d,f]),k=function(e){var r=e.data;v(r)};return(0,i.useEffect)((function(){return h.current=new Worker(new URL(n.p+n.u(527),n.b),{type:void 0}),h.current.postMessage({points:y,interval:b}),h.current.onmessage=k,function(){return h.current.removeEventListener("message",k),h.current.terminate()}}),[y,b]),(0,t.jsx)(u.Provider,{value:{rate:p,predictions:{},interval:b,setInterval:g},children:r})}},7933:function(e,r,n){"use strict";n.d(r,{X:function(){return b},t:function(){return g}});var t,a=n(5893),i=n(9999),o=n(809),s=n.n(o),l=n(2447),u=n(9642),c=function(){(t=new u.Z("munimuni")).version(1).stores({leaderboardChanges:"++id, event, rank, date, points, change"})};try{c()}catch(y){console.log("fuck"),t.delete(),c()}var d=function(e){return(0,l.Z)(s().mark((function r(){var n,a=arguments;return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,e.apply(void 0,a);case 3:return r.abrupt("return",r.sent);case 6:r.prev=6,r.t0=r.catch(0),n=r.t0,r.t1=n.name,r.next="OpenFailedError"===r.t1?12:17;break;case 12:return t.delete(),c(),r.next=16,e.apply(void 0,a);case 16:return r.abrupt("break",18);case 17:throw n;case 18:case"end":return r.stop()}}),r,null,[[0,6]])})))},f=d(function(){var e=(0,l.Z)(s().mark((function e(r){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.table("leaderboardChanges").where("event").equals(r).toArray();case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()),h=d(function(){var e=(0,l.Z)(s().mark((function e(r){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.table("leaderboardChanges").bulkAdd(r));case 1:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()),x=n(4693),p=n(9490),v=n(7294),m=n(5837),j=n(3451),b=(0,v.createContext)({}),g=function(e){var r=e.children,n=(0,v.useContext)(j.G).lbData,t=(0,v.useContext)(m.A).event,o=(0,v.useState)({}),u=o[0],c=o[1],d=(0,v.useState)([]),g=d[0],y=d[1],k=(0,v.useRef)(),w=(0,v.useCallback)((0,l.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",Promise.resolve([]));case 2:return e.abrupt("return",f(t.eventid));case 3:case"end":return e.stop()}}),e)}))),[t]);return(0,x.b)(w,y),(0,v.useEffect)((function(){if(t){if(k.current){var e=[],r=n.map((function(r){var n,a=k.current.find((function(e){return e.rank===r.rank}));if(!a)return[r.rank,r.points];var i=r.points-a.points,o=i>0?i:p.ou.fromISO(r.date).diffNow().as("minutes")>-4&&null!==(n=u[r.rank])&&void 0!==n?n:0;return i>0&&e.push({event:t.eventid,rank:r.rank,change:o,date:p.ou.fromISO(r.date).toSeconds(),points:r.points}),[r.rank,o]}));y((function(r){return[].concat((0,i.Z)(r),e)})),h(e),c(Object.fromEntries(r))}k.current=n}}),[n,t]),(0,a.jsx)(b.Provider,{value:{changes:u,pastUpdates:g},children:r})}},4453:function(){}}]);