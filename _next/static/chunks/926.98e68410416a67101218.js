(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[926],{83926:function(e,n,r){"use strict";r.r(n),r.d(n,{Towaland:function(){return x}});var t=r(85893),i=r(809),a=r.n(i),o=r(92447),s=r(64121),u=r(94096),c=r(67294),l=r(13450),d=r(35277),h=r(29838),f=(r(80356),r(67101)),p=r(32800),m=r(64115),w=r(40980),v=r(73979),g=r(13450),x=function(){var e=(0,c.useRef)(),n=(0,c.useRef)(null),r=(0,d.tH)(n),i=(0,s.Z)(r,2),x=i[0],M=i[1],j=(0,c.useState)(0),S=j[0],_=j[1],y=(0,c.useState)("hello"),C=y[0],b=y[1],A=(0,c.useRef)(),R=(0,c.useRef)();return(0,c.useEffect)((function(){e.current=new l.Application({transparent:!0,width:x,height:M,autoStart:!0});var r=e.current;return h.Live2DModel.registerTicker(l.Ticker),n.current.appendChild(r.view),function(){var e=(0,o.Z)(a().mark((function e(){var n,t,i,o,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return r.loader.add("towa",(0,v.Z)("spine/spine_chara_0330001.json")).add("muni",(0,v.Z)("spine/spine_chara_0130001.json")).load((function(n,r){e(r)}))}));case 2:if(n=e.sent,0!==S){e.next=26;break}t=new g.spine.Spine(n.towa.spineData),i=new g.spine.Spine(n.muni.spineData),t.skeleton.setSkinByName("normal"),i.skeleton.setSkinByName("reverse"),console.log(i.skeleton.slots.map((function(e){return e}))),i.skeleton.findSlot("Rabbit ears_L(for)").setAttachment(null),i.skeleton.findSlot("Rabbit ears_R(for)").setAttachment(null),o=2*t.width>r.renderer.width?r.renderer.width/3/t.width:t.height>r.renderer.height?r.renderer.height/t.height:1,t.scale.x=o,t.scale.y=o,i.scale.x=-1*o,i.scale.y=o,t.x=.2*r.renderer.width,t.y=r.renderer.height,i.x=.8*r.renderer.width,i.y=r.renderer.height,t.state.setAnimation(0,"06_talk_A",!0),i.state.setAnimation(0,"07_talk_B",!0),r.stage.addChild(t),r.stage.addChild(i),e.next=49;break;case 26:return e.next=28,h.Live2DModel.from((0,v.Z)("live2d/towa/resources.model3.json"));case 28:return A.current=e.sent,e.next=31,h.Live2DModel.from((0,v.Z)("live2d/muni/resources.model3.json"));case 31:R.current=e.sent,s=A.current.height/2>r.renderer.height?3*r.renderer.height/A.current.height:A.current.width>3*r.renderer.width/4?r.renderer.width/A.current.width:1,A.current.x=.25*r.renderer.width,A.current.y=9*r.renderer.height/10,A.current.rotation=Math.PI,A.current.skew.x=Math.PI,A.current.scale.set(-1*s,s),A.current.anchor.set(.5,.5),R.current.x=.75*r.renderer.width,R.current.y=9*r.renderer.height/10,R.current.rotation=Math.PI,R.current.skew.x=Math.PI,R.current.scale.set(s,s),R.current.anchor.set(.5,.5),A.current.internalModel.motionManager.startRandomMotion(""),R.current.internalModel.motionManager.startRandomMotion(""),r.stage.addChild(A.current),r.stage.addChild(R.current);case 49:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),function(){var e;null===(e=n.current)||void 0===e||e.removeChild(r.view)}}),[x,M,S]),(0,c.useEffect)((function(){var e,n;A.current&&R.current&&(null===(e=A.current)||void 0===e||e.motion("",k(A.current,C)),null===(n=R.current)||void 0===n||n.motion("",k(R.current,C)));return function(){var e,n;null===(e=A.current)||void 0===e||e.internalModel.motionManager.stopAllMotions(),null===(n=R.current)||void 0===n||n.internalModel.motionManager.stopAllMotions()}}),[C]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(u.k,{flexDir:["column",null,"row"],alignItems:"center",children:[(0,t.jsxs)(f.h,{isAttached:!0,variant:"solid",children:[(0,t.jsx)(p.z,{colorScheme:0===S?"blue":"whitealpha",variant:0===S?"solid":"outline",onClick:function(){return _(0)},children:"Spine"}),(0,t.jsx)(p.z,{colorScheme:1===S?"blue":"whitealpha",variant:1===S?"solid":"outline",onClick:function(){return _(1)},children:"Live2D"})]}),1===S&&(0,t.jsxs)(u.k,{alignItems:"center",px:2,children:[(0,t.jsx)(m.x,{whiteSpace:"nowrap",children:"Pose"}),(0,t.jsx)(w.Select,{onChange:function(e){return b(e.currentTarget.value)},value:C,children:["idle","happy","sad","angry","dance","yes","no","cry","amazed","shame","think","question","performance","waver","panic"].map((function(e){return(0,t.jsx)("option",{value:e,children:e},e)}))}),(0,t.jsx)(m.x,{whiteSpace:"nowrap",children:"(Doesn't make sense though)"})]})]}),(0,t.jsx)(u.k,{minH:"990px",w:"full",flex:"1",ref:n})]})};n.default=x;var k=function(e,n){var r;return null!==(r=e.internalModel.settings.motions[""].map((function(e,r){return e.File.match(n)?r:void 0})).filter((function(e){return e}))[0])&&void 0!==r?r:0}}}]);